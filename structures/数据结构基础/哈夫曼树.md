# ğŸ˜› æ•°æ®ç»“æ„åŸºç¡€ - å“ˆå¤«æ›¼æ ‘

---

## å“ˆå¤«æ›¼æ ‘çš„ä»‹ç»

`Huffman Tree`ï¼Œä¸­æ–‡åæ˜¯`å“ˆå¤«æ›¼æ ‘`æˆ–`éœå¤«æ›¼æ ‘`ï¼Œå®ƒæ˜¯`æœ€ä¼˜äºŒå‰æ ‘`ã€‚

**å®šä¹‰**ï¼šç»™å®šnä¸ªæƒå€¼ä½œä¸ºnä¸ªå¶å­ç»“ç‚¹ï¼Œæ„é€ ä¸€æ£µäºŒå‰æ ‘ï¼Œè‹¥æ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦è¾¾åˆ°æœ€å°ï¼Œåˆ™è¿™æ£µæ ‘è¢«ç§°ä¸ºå“ˆå¤«æ›¼æ ‘ã€‚ è¿™ä¸ªå®šä¹‰é‡Œé¢æ¶‰åŠåˆ°äº†å‡ ä¸ªé™Œç”Ÿçš„æ¦‚å¿µï¼Œä¸‹é¢å°±æ˜¯ä¸€é¢—å“ˆå¤«æ›¼æ ‘ï¼Œæˆ‘ä»¬æ¥çœ‹å›¾è§£ç­”ã€‚

![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-09-25/4edc7fce-b483-4463-89b4-e66c3cd75adf_01.jpg)

(01) è·¯å¾„å’Œè·¯å¾„é•¿åº¦

> **å®šä¹‰**ï¼šåœ¨ä¸€æ£µæ ‘ä¸­ï¼Œä»ä¸€ä¸ªç»“ç‚¹å¾€ä¸‹å¯ä»¥è¾¾åˆ°çš„å­©å­æˆ–å­™å­ç»“ç‚¹ä¹‹é—´çš„é€šè·¯ï¼Œç§°ä¸ºè·¯å¾„ã€‚é€šè·¯ä¸­åˆ†æ”¯çš„æ•°ç›®ç§°ä¸ºè·¯å¾„é•¿åº¦ã€‚è‹¥è§„å®šæ ¹ç»“ç‚¹çš„å±‚æ•°ä¸º1ï¼Œåˆ™ä»æ ¹ç»“ç‚¹åˆ°ç¬¬Lå±‚ç»“ç‚¹çš„è·¯å¾„é•¿åº¦ä¸ºL-1ã€‚
> **ä¾‹å­**ï¼š100å’Œ80çš„è·¯å¾„é•¿åº¦æ˜¯1ï¼Œ50å’Œ30çš„è·¯å¾„é•¿åº¦æ˜¯2ï¼Œ20å’Œ10çš„è·¯å¾„é•¿åº¦æ˜¯3ã€‚

(02) ç»“ç‚¹çš„æƒåŠå¸¦æƒè·¯å¾„é•¿åº¦

> **å®šä¹‰**ï¼šè‹¥å°†æ ‘ä¸­ç»“ç‚¹èµ‹ç»™ä¸€ä¸ªæœ‰ç€æŸç§å«ä¹‰çš„æ•°å€¼ï¼Œåˆ™è¿™ä¸ªæ•°å€¼ç§°ä¸ºè¯¥ç»“ç‚¹çš„æƒã€‚ç»“ç‚¹çš„å¸¦æƒè·¯å¾„é•¿åº¦ä¸ºï¼šä»æ ¹ç»“ç‚¹åˆ°è¯¥ç»“ç‚¹ä¹‹é—´çš„è·¯å¾„é•¿åº¦ä¸è¯¥ç»“ç‚¹çš„æƒçš„ä¹˜ç§¯ã€‚
> **ä¾‹å­**ï¼šèŠ‚ç‚¹20çš„è·¯å¾„é•¿åº¦æ˜¯3ï¼Œå®ƒçš„å¸¦æƒè·¯å¾„é•¿åº¦= è·¯å¾„é•¿åº¦ * æƒ = 3 * 20 = 60ã€‚

(03) æ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦

> **å®šä¹‰**ï¼šæ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦è§„å®šä¸ºæ‰€æœ‰å¶å­ç»“ç‚¹çš„å¸¦æƒè·¯å¾„é•¿åº¦ä¹‹å’Œï¼Œè®°ä¸ºWPLã€‚
> **ä¾‹å­**ï¼šç¤ºä¾‹ä¸­ï¼Œæ ‘çš„WPL= 1**100 + 2**80 + 3**20 + 3**10 = 100 + 160 + 60 + 30 = 350ã€‚


æ¯”è¾ƒä¸‹é¢ä¸¤æ£µæ ‘

![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-09-25/02009a29-0ab2-4c94-8c9b-1737f5e292fa_02.jpg)

ä¸Šé¢çš„ä¸¤æ£µæ ‘éƒ½æ˜¯ä»¥{10, 20, 50, 100}ä¸ºå¶å­èŠ‚ç‚¹çš„æ ‘ã€‚

> å·¦è¾¹çš„æ ‘WPL=2*10 + 2*20 + 2*50 + 2*100 = 360
> å³è¾¹çš„æ ‘WPL=350

å·¦è¾¹çš„æ ‘WPL > å³è¾¹çš„æ ‘çš„WPLã€‚ä½ ä¹Ÿå¯ä»¥è®¡ç®—é™¤ä¸Šé¢ä¸¤ç§ç¤ºä¾‹ä¹‹å¤–çš„æƒ…å†µï¼Œä½†å®é™…ä¸Šå³è¾¹çš„æ ‘å°±æ˜¯{10,20,50,100}å¯¹åº”çš„å“ˆå¤«æ›¼æ ‘ã€‚è‡³æ­¤ï¼Œåº”è¯¥å †å“ˆå¤«æ›¼æ ‘çš„æ¦‚å¿µæœ‰äº†ä¸€å®šçš„äº†è§£äº†ï¼Œä¸‹é¢çœ‹çœ‹å¦‚ä½•å»æ„é€ ä¸€æ£µå“ˆå¤«æ›¼æ ‘ã€‚



## å“ˆå¤«æ›¼æ ‘çš„å›¾æ–‡è§£æ

å‡è®¾æœ‰nä¸ªæƒå€¼ï¼Œåˆ™æ„é€ å‡ºçš„å“ˆå¤«æ›¼æ ‘æœ‰nä¸ªå¶å­ç»“ç‚¹ã€‚ nä¸ªæƒå€¼åˆ†åˆ«è®¾ä¸º w1ã€w2ã€â€¦ã€wnï¼Œå“ˆå¤«æ›¼æ ‘çš„æ„é€ è§„åˆ™ä¸ºï¼š

> **1**. å°†w1ã€w2ã€â€¦ï¼Œwnçœ‹æˆæ˜¯æœ‰n æ£µæ ‘çš„æ£®æ—(æ¯æ£µæ ‘ä»…æœ‰ä¸€ä¸ªç»“ç‚¹)ï¼›
>
> **2**. åœ¨æ£®æ—ä¸­é€‰å‡ºæ ¹ç»“ç‚¹çš„æƒå€¼æœ€å°çš„ä¸¤æ£µæ ‘è¿›è¡Œåˆå¹¶ï¼Œä½œä¸ºä¸€æ£µæ–°æ ‘çš„å·¦ã€å³å­æ ‘ï¼Œä¸”æ–°æ ‘çš„æ ¹ç»“ç‚¹æƒå€¼ä¸ºå…¶å·¦ã€å³å­æ ‘æ ¹ç»“ç‚¹æƒå€¼ä¹‹å’Œï¼›
>
> **3**. ä»æ£®æ—ä¸­åˆ é™¤é€‰å–çš„ä¸¤æ£µæ ‘ï¼Œå¹¶å°†æ–°æ ‘åŠ å…¥æ£®æ—ï¼›
>
> **4**. é‡å¤(02)ã€(03)æ­¥ï¼Œç›´åˆ°æ£®æ—ä¸­åªå‰©ä¸€æ£µæ ‘ä¸ºæ­¢ï¼Œè¯¥æ ‘å³ä¸ºæ‰€æ±‚å¾—çš„å“ˆå¤«æ›¼æ ‘ã€‚


ä»¥{5,6,7,8,15}ä¸ºä¾‹ï¼Œæ¥æ„é€ ä¸€æ£µå“ˆå¤«æ›¼æ ‘ã€‚

![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-09-25/85f7184a-1b5f-475b-8953-c4ccdc9e6a24_03.jpg)

**ç¬¬1æ­¥**ï¼šåˆ›å»ºæ£®æ—ï¼Œæ£®æ—åŒ…æ‹¬5æ£µæ ‘ï¼Œè¿™5æ£µæ ‘çš„æƒå€¼åˆ†åˆ«æ˜¯5,6,7,8,15ã€‚

**ç¬¬2æ­¥**ï¼šåœ¨æ£®æ—ä¸­ï¼Œé€‰æ‹©æ ¹èŠ‚ç‚¹æƒå€¼æœ€å°çš„ä¸¤æ£µæ ‘(5å’Œ6)æ¥è¿›è¡Œåˆå¹¶ï¼Œå°†å®ƒä»¬ä½œä¸ºä¸€é¢—æ–°æ ‘çš„å·¦å³å­©å­(è°å·¦è°å³æ— å…³ç´§è¦ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©è¾ƒå°çš„ä½œä¸ºå·¦å­©å­)ï¼Œå¹¶ä¸”æ–°æ ‘çš„æƒå€¼æ˜¯å·¦å³å­©å­çš„æƒå€¼ä¹‹å’Œã€‚å³ï¼Œæ–°æ ‘çš„æƒå€¼æ˜¯11ã€‚ ç„¶åï¼Œå°†"æ ‘5"å’Œ"æ ‘6"ä»æ£®æ—ä¸­åˆ é™¤ï¼Œå¹¶å°†æ–°çš„æ ‘(æ ‘11)æ·»åŠ åˆ°æ£®æ—ä¸­ã€‚

**ç¬¬3æ­¥**ï¼šåœ¨æ£®æ—ä¸­ï¼Œé€‰æ‹©æ ¹èŠ‚ç‚¹æƒå€¼æœ€å°çš„ä¸¤æ£µæ ‘(7å’Œ8)æ¥è¿›è¡Œåˆå¹¶ã€‚å¾—åˆ°çš„æ–°æ ‘çš„æƒå€¼æ˜¯15ã€‚ ç„¶åï¼Œå°†"æ ‘7"å’Œ"æ ‘8"ä»æ£®æ—ä¸­åˆ é™¤ï¼Œå¹¶å°†æ–°çš„æ ‘(æ ‘15)æ·»åŠ åˆ°æ£®æ—ä¸­ã€‚

**ç¬¬4æ­¥**ï¼šåœ¨æ£®æ—ä¸­ï¼Œé€‰æ‹©æ ¹èŠ‚ç‚¹æƒå€¼æœ€å°çš„ä¸¤æ£µæ ‘(11å’Œ15)æ¥è¿›è¡Œåˆå¹¶ã€‚å¾—åˆ°çš„æ–°æ ‘çš„æƒå€¼æ˜¯26ã€‚ ç„¶åï¼Œå°†"æ ‘11"å’Œ"æ ‘15"ä»æ£®æ—ä¸­åˆ é™¤ï¼Œå¹¶å°†æ–°çš„æ ‘(æ ‘26)æ·»åŠ åˆ°æ£®æ—ä¸­ã€‚

**ç¬¬5æ­¥**ï¼šåœ¨æ£®æ—ä¸­ï¼Œé€‰æ‹©æ ¹èŠ‚ç‚¹æƒå€¼æœ€å°çš„ä¸¤æ£µæ ‘(15å’Œ26)æ¥è¿›è¡Œåˆå¹¶ã€‚å¾—åˆ°çš„æ–°æ ‘çš„æƒå€¼æ˜¯41ã€‚ ç„¶åï¼Œå°†"æ ‘15"å’Œ"æ ‘26"ä»æ£®æ—ä¸­åˆ é™¤ï¼Œå¹¶å°†æ–°çš„æ ‘(æ ‘41)æ·»åŠ åˆ°æ£®æ—ä¸­ã€‚

æ­¤æ—¶ï¼Œæ£®æ—ä¸­åªæœ‰ä¸€æ£µæ ‘(æ ‘41)ã€‚è¿™æ£µæ ‘å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å“ˆå¤«æ›¼æ ‘ï¼



## å“ˆå¤«æ›¼æ ‘çš„åŸºæœ¬æ“ä½œ

> å“ˆå¤«æ›¼æ ‘çš„é‡ç‚¹æ˜¯å¦‚ä½•æ„é€ å“ˆå¤«æ›¼æ ‘ã€‚æœ¬æ–‡æ„é€ å“ˆå¤«æ›¼æ—¶ï¼Œç”¨åˆ°äº†ä»¥å‰ä»‹ç»è¿‡çš„"(äºŒå‰å †)æœ€å°å †"ã€‚ä¸‹é¢å¯¹å“ˆå¤«æ›¼æ ‘è¿›è¡Œè®²è§£ã€‚

### 1. åŸºæœ¬å®šä¹‰

```java
public class HuffmanNode implements Comparable, Cloneable {
    protected int key;              // æƒå€¼
    protected HuffmanNode left;     // å·¦å­©å­
    protected HuffmanNode right;    // å³å­©å­
    protected HuffmanNode parent;   // çˆ¶ç»“ç‚¹

    protected HuffmanNode(int key, HuffmanNode left, HuffmanNode right, HuffmanNode parent) {
        this.key = key;
        this.left = left;
        this.right = right;
        this.parent = parent;
    }

    @Override
    public Object clone() {
        Object obj=null;

        try {
            obj = (HuffmanNode)super.clone();//Object ä¸­çš„clone()è¯†åˆ«å‡ºä½ è¦å¤åˆ¶çš„æ˜¯å“ªä¸€ä¸ªå¯¹è±¡ã€‚    
        } catch(CloneNotSupportedException e) {
            System.out.println(e.toString());
        }

        return obj;    
    }

    @Override
    public int compareTo(Object obj) {
        return this.key - ((HuffmanNode)obj).key;
    }
}
```

HuffmanNodeæ˜¯å“ˆå¤«æ›¼æ ‘çš„èŠ‚ç‚¹ç±»ã€‚

```java
public class Huffman {

    private HuffmanNode mRoot;  // æ ¹ç»“ç‚¹

    ...
}
```

Huffmanæ˜¯å“ˆå¤«æ›¼æ ‘å¯¹åº”çš„ç±»ï¼Œå®ƒåŒ…å«äº†å“ˆå¤«æ›¼æ ‘çš„æ ¹èŠ‚ç‚¹å’Œå“ˆå¤«æ›¼æ ‘çš„ç›¸å…³æ“ä½œã€‚

### 2. æ„é€ å“ˆå¤«æ›¼æ ‘

```java
/* 
 * åˆ›å»ºHuffmanæ ‘
 *
 * @param æƒå€¼æ•°ç»„
 */
public Huffman(int a[]) {
    HuffmanNode parent = null;
    MinHeap heap;

    // å»ºç«‹æ•°ç»„aå¯¹åº”çš„æœ€å°å †
    heap = new MinHeap(a);

    for(int i=0; i<a.length-1; i++) {   
        HuffmanNode left = heap.dumpFromMinimum();  // æœ€å°èŠ‚ç‚¹æ˜¯å·¦å­©å­
        HuffmanNode right = heap.dumpFromMinimum(); // å…¶æ¬¡æ‰æ˜¯å³å­©å­

        // æ–°å»ºparentèŠ‚ç‚¹ï¼Œå·¦å³å­©å­åˆ†åˆ«æ˜¯left/rightï¼›
        // parentçš„å¤§å°æ˜¯å·¦å³å­©å­ä¹‹å’Œ
        parent = new HuffmanNode(left.key+right.key, left, right, null);
        left.parent = parent;
        right.parent = parent;

        // å°†parentèŠ‚ç‚¹æ•°æ®æ‹·è´åˆ°"æœ€å°å †"ä¸­
        heap.insert(parent);
    }

    mRoot = parent;

    // é”€æ¯æœ€å°å †
    heap.destroy();
}
```

é¦–å…ˆåˆ›å»ºæœ€å°å †ï¼Œç„¶åè¿›å…¥forå¾ªç¯ã€‚

æ¯æ¬¡å¾ªç¯æ—¶ï¼š

> (01) é¦–å…ˆï¼Œå°†æœ€å°å †ä¸­çš„æœ€å°èŠ‚ç‚¹æ‹·è´ä¸€ä»½å¹¶èµ‹å€¼ç»™leftï¼Œç„¶åé‡å¡‘æœ€å°å †(å°†æœ€å°èŠ‚ç‚¹å’Œåé¢çš„èŠ‚ç‚¹äº¤æ¢ä½ç½®ï¼Œæ¥ç€å°†"äº¤æ¢ä½ç½®åçš„æœ€å°èŠ‚ç‚¹"ä¹‹å‰çš„å…¨éƒ¨å…ƒç´ é‡æ–°æ„é€ æˆæœ€å°å †)ï¼›
>
> (02) æ¥ç€ï¼Œå†å°†æœ€å°å †ä¸­çš„æœ€å°èŠ‚ç‚¹æ‹·è´ä¸€ä»½å¹¶å°†å…¶èµ‹å€¼rightï¼Œç„¶åå†æ¬¡é‡å¡‘æœ€å°å †ï¼›
>
> (03) ç„¶åï¼Œæ–°å»ºèŠ‚ç‚¹parentï¼Œå¹¶å°†å®ƒä½œä¸ºleftå’Œrightçš„çˆ¶èŠ‚ç‚¹ï¼›
>
> (04) æ¥ç€ï¼Œå°†parentçš„æ•°æ®å¤åˆ¶ç»™æœ€å°å †ä¸­çš„æŒ‡å®šèŠ‚ç‚¹ã€‚

åœ¨[äºŒå‰å †](http://www.cnblogs.com/skywang12345/p/3610390.html)ä¸­å·²ç»ä»‹ç»è¿‡å †ï¼Œè¿™é‡Œå°±ä¸å†å¯¹å †çš„ä»£ç è¿›è¡Œè¯´æ˜äº†ã€‚è‹¥æœ‰ç–‘é—®ï¼Œç›´æ¥å‚è€ƒåæ–‡çš„æºç ã€‚å…¶å®ƒçš„ç›¸å…³ä»£ç ï¼Œä¹ŸPlease RTFSC(Read The Fucking Source Code)ï¼



## å“ˆå¤«æ›¼æ ‘æºç 

### å“ˆå¤«æ›¼æ ‘çš„èŠ‚ç‚¹ç±»

```java
/**
 * HuffmanèŠ‚ç‚¹ç±»(Huffman.javaçš„è¾…åŠ©ç±»)
 *
 * @author skywang
 * @date 2014/03/27
 */

public class HuffmanNode implements Comparable, Cloneable {
	protected int key;				// æƒå€¼
	protected HuffmanNode left;		// å·¦å­©å­
	protected HuffmanNode right;	// å³å­©å­
	protected HuffmanNode parent;	// çˆ¶ç»“ç‚¹

	protected HuffmanNode(int key, HuffmanNode left, HuffmanNode right, HuffmanNode parent) {
		this.key = key;
		this.left = left;
		this.right = right;
		this.parent = parent;
	}

	@Override
	public Object clone() {
		Object obj=null;
		
		try {
			obj = (HuffmanNode)super.clone();//Object ä¸­çš„clone()è¯†åˆ«å‡ºä½ è¦å¤åˆ¶çš„æ˜¯å“ªä¸€ä¸ªå¯¹è±¡ã€‚    
		} catch(CloneNotSupportedException e) {
			System.out.println(e.toString());
		}
		
		return obj;    
	}

	@Override
	public int compareTo(Object obj) {
		return this.key - ((HuffmanNode)obj).key;
	}
}
```

### å“ˆå¤«æ›¼æ ‘çš„å®ç°æ–‡ä»¶

```java
/**
 * Huffmanæ ‘
 *
 * @author skywang
 * @date 2014/03/27
 */

import java.util.List;
import java.util.ArrayList;
import java.util.Collections;

public class Huffman {

	private HuffmanNode mRoot;	// æ ¹ç»“ç‚¹

	/* 
	 * åˆ›å»ºHuffmanæ ‘
	 *
	 * @param æƒå€¼æ•°ç»„
	 */
	public Huffman(int a[]) {
        HuffmanNode parent = null;
		MinHeap heap;

		// å»ºç«‹æ•°ç»„aå¯¹åº”çš„æœ€å°å †
		heap = new MinHeap(a);
	 
		for(int i=0; i<a.length-1; i++) {   
        	HuffmanNode left = heap.dumpFromMinimum();  // æœ€å°èŠ‚ç‚¹æ˜¯å·¦å­©å­
        	HuffmanNode right = heap.dumpFromMinimum(); // å…¶æ¬¡æ‰æ˜¯å³å­©å­
	 
			// æ–°å»ºparentèŠ‚ç‚¹ï¼Œå·¦å³å­©å­åˆ†åˆ«æ˜¯left/rightï¼›
			// parentçš„å¤§å°æ˜¯å·¦å³å­©å­ä¹‹å’Œ
			parent = new HuffmanNode(left.key+right.key, left, right, null);
			left.parent = parent;
			right.parent = parent;

			// å°†parentèŠ‚ç‚¹æ•°æ®æ‹·è´åˆ°"æœ€å°å †"ä¸­
			heap.insert(parent);
		}

		mRoot = parent;

		// é”€æ¯æœ€å°å †
		heap.destroy();
	}

	/*
	 * å‰åºéå†"Huffmanæ ‘"
	 */
	private void preOrder(HuffmanNode tree) {
		if(tree != null) {
			System.out.print(tree.key+" ");
			preOrder(tree.left);
			preOrder(tree.right);
		}
	}

	public void preOrder() {
		preOrder(mRoot);
	}

	/*
	 * ä¸­åºéå†"Huffmanæ ‘"
	 */
	private void inOrder(HuffmanNode tree) {
		if(tree != null) {
			inOrder(tree.left);
			System.out.print(tree.key+" ");
			inOrder(tree.right);
		}
	}

	public void inOrder() {
		inOrder(mRoot);
	}


	/*
	 * ååºéå†"Huffmanæ ‘"
	 */
	private void postOrder(HuffmanNode tree) {
		if(tree != null)
		{
			postOrder(tree.left);
			postOrder(tree.right);
			System.out.print(tree.key+" ");
		}
	}

	public void postOrder() {
		postOrder(mRoot);
	}

	/*
	 * é”€æ¯Huffmanæ ‘
	 */
	private void destroy(HuffmanNode tree) {
		if (tree==null)
			return ;

		if (tree.left != null)
			destroy(tree.left);
		if (tree.right != null)
			destroy(tree.right);

		tree=null;
	}

	public void destroy() {
		destroy(mRoot);
		mRoot = null;
	}

	/*
	 * æ‰“å°"Huffmanæ ‘"
	 *
	 * key        -- èŠ‚ç‚¹çš„é”®å€¼ 
	 * direction  --  0ï¼Œè¡¨ç¤ºè¯¥èŠ‚ç‚¹æ˜¯æ ¹èŠ‚ç‚¹;
	 *               -1ï¼Œè¡¨ç¤ºè¯¥èŠ‚ç‚¹æ˜¯å®ƒçš„çˆ¶ç»“ç‚¹çš„å·¦å­©å­;
	 *                1ï¼Œè¡¨ç¤ºè¯¥èŠ‚ç‚¹æ˜¯å®ƒçš„çˆ¶ç»“ç‚¹çš„å³å­©å­ã€‚
	 */
	private void print(HuffmanNode tree, int key, int direction) {

		if(tree != null) {

			if(direction==0)	// treeæ˜¯æ ¹èŠ‚ç‚¹
				System.out.printf("%2d is root\n", tree.key);
			else				// treeæ˜¯åˆ†æ”¯èŠ‚ç‚¹
				System.out.printf("%2d is %2d's %6s child\n", tree.key, key, direction==1?"right" : "left");

			print(tree.left, tree.key, -1);
			print(tree.right,tree.key,  1);
		}
	}

	public void print() {
		if (mRoot != null)
			print(mRoot, mRoot.key, 0);
	}
}
```

### å“ˆå¤«æ›¼æ ‘å¯¹åº”çš„æœ€å°å †

```java
/**
 * æœ€å°å †(Huffman.javaçš„è¾…åŠ©ç±»)
 *
 * @author skywang
 * @date 2014/03/27
 */

import java.util.ArrayList;
import java.util.List;

public class MinHeap {

	private List<HuffmanNode> mHeap;		// å­˜æ”¾å †çš„æ•°ç»„

	/* 
	 * åˆ›å»ºæœ€å°å †
	 *
	 * å‚æ•°è¯´æ˜ï¼š
	 *     a -- æ•°æ®æ‰€åœ¨çš„æ•°ç»„
	 */
	protected MinHeap(int a[]) {
		mHeap = new ArrayList<HuffmanNode>();
		// åˆå§‹åŒ–æ•°ç»„
		for(int i=0; i<a.length; i++) {
		    HuffmanNode node = new HuffmanNode(a[i], null, null, null);
			mHeap.add(node);
		}

		// ä»(size/2-1) --> 0é€æ¬¡éå†ã€‚éå†ä¹‹åï¼Œå¾—åˆ°çš„æ•°ç»„å®é™…ä¸Šæ˜¯ä¸€ä¸ªæœ€å°å †ã€‚
		for (int i = a.length / 2 - 1; i >= 0; i--)
			filterdown(i, a.length-1);
	}

	/* 
	 * æœ€å°å †çš„å‘ä¸‹è°ƒæ•´ç®—æ³•
	 *
	 * æ³¨ï¼šæ•°ç»„å®ç°çš„å †ä¸­ï¼Œç¬¬Nä¸ªèŠ‚ç‚¹çš„å·¦å­©å­çš„ç´¢å¼•å€¼æ˜¯(2N+1)ï¼Œå³å­©å­çš„ç´¢å¼•æ˜¯(2N+2)ã€‚
	 *
	 * å‚æ•°è¯´æ˜ï¼š
	 *     start -- è¢«ä¸‹è°ƒèŠ‚ç‚¹çš„èµ·å§‹ä½ç½®(ä¸€èˆ¬ä¸º0ï¼Œè¡¨ç¤ºä»ç¬¬1ä¸ªå¼€å§‹)
	 *     end   -- æˆªè‡³èŒƒå›´(ä¸€èˆ¬ä¸ºæ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•)
	 */
	protected void filterdown(int start, int end) {
		int c = start; 	 	// å½“å‰(current)èŠ‚ç‚¹çš„ä½ç½®
		int l = 2*c + 1; 	// å·¦(left)å­©å­çš„ä½ç½®
		HuffmanNode tmp = mHeap.get(c);	// å½“å‰(current)èŠ‚ç‚¹

		while(l <= end) {
			// "l"æ˜¯å·¦å­©å­ï¼Œ"l+1"æ˜¯å³å­©å­
			if(l < end && (mHeap.get(l).compareTo(mHeap.get(l+1))>0))
				l++;		// å·¦å³ä¸¤å­©å­ä¸­é€‰æ‹©è¾ƒå°è€…ï¼Œå³mHeap[l+1]

			int cmp = tmp.compareTo(mHeap.get(l));
			if(cmp <= 0)
				break;		//è°ƒæ•´ç»“æŸ
			else {
				mHeap.set(c, mHeap.get(l));
				c = l;
				l = 2*l + 1;   
			}       
		}   
		mHeap.set(c, tmp);
	}
	
	/*
	 * æœ€å°å †çš„å‘ä¸Šè°ƒæ•´ç®—æ³•(ä»startå¼€å§‹å‘ä¸Šç›´åˆ°0ï¼Œè°ƒæ•´å †)
	 *
	 * æ³¨ï¼šæ•°ç»„å®ç°çš„å †ä¸­ï¼Œç¬¬Nä¸ªèŠ‚ç‚¹çš„å·¦å­©å­çš„ç´¢å¼•å€¼æ˜¯(2N+1)ï¼Œå³å­©å­çš„ç´¢å¼•æ˜¯(2N+2)ã€‚
	 *
	 * å‚æ•°è¯´æ˜ï¼š
	 *     start -- è¢«ä¸Šè°ƒèŠ‚ç‚¹çš„èµ·å§‹ä½ç½®(ä¸€èˆ¬ä¸ºæ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•)
	 */
	protected void filterup(int start) {
		int c = start;			// å½“å‰èŠ‚ç‚¹(current)çš„ä½ç½®
		int p = (c-1)/2;		// çˆ¶(parent)ç»“ç‚¹çš„ä½ç½® 
		HuffmanNode tmp = mHeap.get(c);	// å½“å‰(current)èŠ‚ç‚¹

		while(c > 0) {
			int cmp = mHeap.get(p).compareTo(tmp);
			if(cmp <= 0)
				break;
			else {
				mHeap.set(c, mHeap.get(p));
				c = p;
				p = (p-1)/2;   
			}       
		}
		mHeap.set(c, tmp);
	} 
 
	/* 
	 * å°†nodeæ’å…¥åˆ°äºŒå‰å †ä¸­
	 */
	protected void insert(HuffmanNode node) {
		int size = mHeap.size();

		mHeap.add(node);	// å°†"æ•°ç»„"æ’åœ¨è¡¨å°¾
		filterup(size);		// å‘ä¸Šè°ƒæ•´å †
	}

	/*
	 * äº¤æ¢ä¸¤ä¸ªHuffmanNodeèŠ‚ç‚¹çš„å…¨éƒ¨æ•°æ®
	 */
	private void swapNode(int i, int j) {
		HuffmanNode tmp = mHeap.get(i);
		mHeap.set(i, mHeap.get(j));
		mHeap.set(j, tmp);
	}

	/* 
	 * æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å°†æœ€å°å †ä¸­æœ€å°èŠ‚ç‚¹çš„æ•°æ®å¤åˆ¶ç»™è¯¥èŠ‚ç‚¹ã€‚
	 * ç„¶åé™¤æœ€å°èŠ‚ç‚¹ä¹‹å¤–çš„æ•°æ®é‡æ–°æ„é€ æˆæœ€å°å †ã€‚
	 *
	 * è¿”å›å€¼ï¼š
	 *     å¤±è´¥è¿”å›nullã€‚
	 */
	protected HuffmanNode dumpFromMinimum() {
		int size = mHeap.size();

		// å¦‚æœ"å †"å·²ç©ºï¼Œåˆ™è¿”å›
		if(size == 0)
			return null;

		// å°†"æœ€å°èŠ‚ç‚¹"å…‹éš†ä¸€ä»½ï¼Œå°†å…‹éš†å¾—åˆ°çš„å¯¹è±¡èµ‹å€¼ç»™node
		HuffmanNode node = (HuffmanNode)mHeap.get(0).clone();

		// äº¤æ¢"æœ€å°èŠ‚ç‚¹"å’Œ"æœ€åä¸€ä¸ªèŠ‚ç‚¹"
		mHeap.set(0, mHeap.get(size-1));
		// åˆ é™¤æœ€åçš„å…ƒç´ 
		mHeap.remove(size-1);

		if (mHeap.size() > 1)
			filterdown(0, mHeap.size()-1);

		return node;
	}

	// é”€æ¯æœ€å°å †
	protected void destroy() {
		mHeap.clear();
		mHeap = null;
	}
}
```

### å“ˆå¤«æ›¼æ ‘çš„æµ‹è¯•ç¨‹åº

```java
/**
 * Huffmanæ ‘çš„æµ‹è¯•ç¨‹åº
 *
 * @author skywang
 * @date 2014/03/27
 */

public class HuffmanTest {

	private static final int a[]= {5,6,8,7,15};

	public static void main(String[] args) {
		int i;
		Huffman tree;

		System.out.print("== æ·»åŠ æ•°ç»„: ");
		for(i=0; i<a.length; i++) 
			System.out.print(a[i]+" ");
	
		// åˆ›å»ºæ•°ç»„aå¯¹åº”çš„Huffmanæ ‘
		tree = new Huffman(a);

		System.out.print("\n== å‰åºéå†: ");
		tree.preOrder();

		System.out.print("\n== ä¸­åºéå†: ");
		tree.inOrder();

		System.out.print("\n== ååºéå†: ");
		tree.postOrder();
		System.out.println();

		System.out.println("== æ ‘çš„è¯¦ç»†ä¿¡æ¯: ");
		tree.print();

		// é”€æ¯äºŒå‰æ ‘
		tree.destroy();
	}
}
```

æµ‹è¯•ç»“æœ

```java
== æ·»åŠ æ•°ç»„: 5 6 8 7 15 
== å‰åºéå†: 41 15 26 11 5 6 15 7 8 
== ä¸­åºéå†: 15 41 5 11 6 26 7 15 8 
== ååºéå†: 15 5 6 11 7 8 15 26 41 
== æ ‘çš„è¯¦ç»†ä¿¡æ¯: 
41 is root
15 is 41's   left child
26 is 41's  right child
11 is 26's   left child
 5 is 11's   left child
 6 is 11's  right child
15 is 26's  right child
 7 is 15's   left child
 8 is 15's  right child
```



## å‚è€ƒæ–‡ç« 

- [å“ˆå¤«æ›¼æ ‘(ä¸‰)ä¹‹ Javaè¯¦è§£ ](https://www.cnblogs.com/skywang12345/p/3706833.html)

