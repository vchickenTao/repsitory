# ğŸŒ… Redis - ä¸»ä»å¤åˆ¶

---

# ä¸»ä»å¤åˆ¶è¯¦è§£

## æ¦‚å¿µ

ä¸»æœºæ•°æ®æ›´æ–°åæ ¹æ®é…ç½®å’Œç­–ç•¥ï¼Œ è‡ªåŠ¨åŒæ­¥åˆ°å¤‡æœºçš„ master/slaver æœºåˆ¶ï¼ŒMaster ä»¥å†™ä¸ºä¸»ï¼ŒSlave ä»¥è¯»ä¸ºä¸»ï¼Œä¸»ä»å¤åˆ¶èŠ‚ç‚¹é—´æ•°æ®æ˜¯å…¨é‡çš„ã€‚

ä½œç”¨ï¼š

- è¯»å†™åˆ†ç¦»ï¼Œæ€§èƒ½æ‰©å±•
- å®¹ç¾å¿«é€Ÿæ¢å¤

![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-10-16/56c6de47-8612-4433-820a-6f4653386a9b_redis-slave-10.png)

## å¤åˆ¶åŸç†

- Slave å¯åŠ¨æˆåŠŸè¿æ¥åˆ° master åä¼šå‘é€ä¸€ä¸ª sync å‘½ä»¤ï¼›
- Master æ¥åˆ°å‘½ä»¤å¯åŠ¨åå°çš„å­˜ç›˜è¿›ç¨‹ï¼ŒåŒæ—¶æ”¶é›†æ‰€æœ‰æ¥æ”¶åˆ°çš„ç”¨äºä¿®æ”¹æ•°æ®é›†å‘½ä»¤ï¼Œåœ¨åå°è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œmaster å°†ä¼ é€æ•´ä¸ªæ•°æ®æ–‡ä»¶åˆ° slaveï¼Œä»¥å®Œæˆä¸€æ¬¡å®Œå…¨åŒæ­¥ã€‚
- `å…¨é‡å¤åˆ¶`ï¼šslave æœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚
- `å¢é‡å¤åˆ¶`ï¼šMaster ç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤ä¾æ¬¡ä¼ ç»™ slaveï¼Œå®ŒæˆåŒæ­¥ã€‚
- ä½†æ˜¯åªè¦æ˜¯é‡æ–°è¿æ¥ masterï¼Œä¸€æ¬¡å®Œå…¨åŒæ­¥ï¼ˆå…¨é‡å¤åˆ¶) å°†è¢«è‡ªåŠ¨æ‰§è¡Œã€‚

![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-10-16/52887c98-23cd-4752-89c1-366b10ba4cf0_redis-slave-11.png)

# Linuxæ­å»ºä¸€ä¸»å¤šä»

> [!TIP]
>
> ç”±äºæœ¬äººåªæœ‰ä¸€å°æœåŠ¡å™¨ï¼Œå› æ­¤æˆ‘ä»¬è¿™é‡Œæ¥æ¨¡æ‹Ÿåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šæ­å»ºRedisä¸€ä¸»å¤šä»çš„ç¯å¢ƒï¼Œä»¥ç«¯å£æ¥åŒºåˆ†ã€‚@vchicken

## æ­å»ºæ­¥éª¤

### 1.åˆ›å»ºæ–‡ä»¶å¤¹

- åœ¨rootä¸‹åˆ›å»º/myredisæ–‡ä»¶å¤¹ï¼Œæ¥ä¸‹æ¥çš„æ­å»ºéƒ½åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹å®Œæˆ

### 2.å¤åˆ¶redis.confé…ç½®æ–‡ä»¶åˆ°æ–‡ä»¶å¤¹ä¸­

- è¾“å…¥å‘½ä»¤ï¼šcp /usr/local/redis/redis-7.0.5/redis.conf /root/myredis/redis.conf

### 3.åˆ›å»ºä¸‰ä¸ªé…ç½®æ–°å»ºï¼ˆæˆ‘ä»¬è¿™é‡Œæ­å»ºä¸€ä¸»äºŒä»çš„ç»“æ„ï¼‰

- æ–°å»ºredis6380.confæ–‡ä»¶ï¼Œvi redis6380.conf

- ç¼–è¾‘æ–‡ä»¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

  > include /root/myredis/redis.conf
  >
  > pidfile /var/run/redis_6380.pid
  >
  > port 6380
  >
  > dbfilename dump6380.rdb
  >
  > :wq!ä¿å­˜é€€å‡º

- åŒæ ·çš„æ–¹å¼ï¼Œåˆ›å»ºå¦å¤–ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹ç›¸å…³ç«¯å£é…ç½®

  ![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-10-16/34ad4f51-dfe6-4bf4-8eec-dc4fbe3f4ed7_redis-slave-01.png)

### 4.å¯åŠ¨æ‰€æœ‰çš„redisæœåŠ¡

- åˆ†åˆ«è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¯åŠ¨redis

  > redis-server redis6380.conf 
  >
  > redis-server redis6381.conf 
  >
  > redis-server redis6382.conf

- å¦‚æœå¯åŠ¨å‡ºç°ä¸‹å›¾æƒ…å†µï¼Œæ˜¯ç”±äºé»˜è®¤å‰å°å¯åŠ¨ï¼Œå¦‚ä½•ä¿®æ”¹å¯å‚è€ƒ[åå°å¯åŠ¨ï¼ˆæ¨èï¼‰](database/Redis/å•æœºRedisçš„å®‰è£…?id=åå°å¯åŠ¨ï¼ˆæ¨èï¼‰)

  ![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-10-16/d431fc5a-43d2-4b22-8693-cf861fca0559_redis-slave-02.png)

- æŸ¥çœ‹æ‰€æœ‰redisè¿›ç¨‹

  ![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-10-16/06e51b52-5e4f-4950-8893-efdad8845eff_redis-slave-03.png)

- æŸ¥çœ‹å½“å‰redisçš„ä¸»æœºä¿¡æ¯

  > redis-cli -p 6380 # åˆ†åˆ«è¿æ¥redis
  >
  > info replication

  ![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-10-16/e3255b04-b39b-4ac0-8917-12d00e431896_redis-slave-05.png)

  å¯ä»¥çœ‹åˆ°ç›®å‰ä¸‰å°rediséƒ½æ˜¯ä¸»æœºï¼Œæ²¡æœ‰ä»æœº

### 5.é…ç½®ä¸»ä»å…³ç³»

- åœ¨ä»æœºä¸Šæ‰§è¡Œå‘½ä»¤ï¼Œslaveof ä¸»æœºip ç«¯å£å·ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥6380ä¸ºä¸»æœºï¼Œå…¶ä½™ä¸ºä»æœº

  ![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-10-16/32f089bb-73ed-46b5-8219-769ecca69ace_redis-slave-07.png)

  å¯ä»¥çœ‹åˆ°ç°åœ¨6380å·²ç»æœ‰ä¸¤ä¸ªä»æœºäº†

### 6.æµ‹è¯•ä¸»ä»æ•ˆæœ

- åœ¨ä¸»æœºä¸­å†™å…¥å€¼

  ![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-10-16/969fdc27-077e-493b-8606-707a9a884164_redis-slave-08.png)

- åœ¨ä»æœºä¸­è¯»å–å€¼

  ![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-10-16/17365189-44e9-48fc-89cd-7c39191e0d04_redis-slave-09.png)

- ä¸»ä»å¤åˆ¶æˆåŠŸï¼Œå°†è¯»å†™åˆ†ç¦»ã€‚



# å‚è€ƒæ–‡ç« 

- [Java å…¨æ ˆçŸ¥è¯†ä½“ç³»](https://www.pdai.tech/md/db/nosql-redis/db-redis-x-copy.html)
- https://zhangc233.github.io/2021/05/02/Redis/#