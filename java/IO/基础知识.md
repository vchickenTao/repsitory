**<span style="font-size: 35px;">ğŸ Java IO åŸºç¡€çŸ¥è¯†</span>**

---

## IO æµç®€ä»‹

IO å³ `Input/Output`ï¼Œè¾“å…¥å’Œè¾“å‡ºã€‚æ•°æ®è¾“å…¥åˆ°è®¡ç®—æœºå†…å­˜çš„è¿‡ç¨‹å³è¾“å…¥ï¼Œåä¹‹è¾“å‡ºåˆ°å¤–éƒ¨å­˜å‚¨ï¼ˆæ¯”å¦‚æ•°æ®åº“ï¼Œæ–‡ä»¶ï¼Œè¿œç¨‹ä¸»æœºï¼‰çš„è¿‡ç¨‹å³è¾“å‡ºã€‚æ•°æ®ä¼ è¾“è¿‡ç¨‹ç±»ä¼¼äºæ°´æµï¼Œå› æ­¤ç§°ä¸º` IO æµ`ã€‚IO æµåœ¨ Java ä¸­åˆ†ä¸ºè¾“å…¥æµå’Œè¾“å‡ºæµï¼Œè€Œæ ¹æ®æ•°æ®çš„å¤„ç†æ–¹å¼åˆåˆ†ä¸ºå­—èŠ‚æµå’Œå­—ç¬¦æµã€‚

Java IO æµçš„ 40 å¤šä¸ªç±»éƒ½æ˜¯ä»å¦‚ä¸‹ 4 ä¸ªæŠ½è±¡ç±»åŸºç±»ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ã€‚

- `InputStream`/`Reader`: æ‰€æœ‰çš„è¾“å…¥æµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å…¥æµï¼Œåè€…æ˜¯å­—ç¬¦è¾“å…¥æµã€‚
- `OutputStream`/`Writer`: æ‰€æœ‰è¾“å‡ºæµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å‡ºæµï¼Œåè€…æ˜¯å­—ç¬¦è¾“å‡ºæµã€‚

## å­—èŠ‚æµ

### InputStreamï¼ˆå­—èŠ‚è¾“å…¥æµï¼‰

`InputStream`ç”¨äºä»æºå¤´ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶ï¼‰è¯»å–æ•°æ®ï¼ˆå­—èŠ‚ä¿¡æ¯ï¼‰åˆ°å†…å­˜ä¸­ï¼Œ`java.io.InputStream`æŠ½è±¡ç±»æ˜¯æ‰€æœ‰å­—èŠ‚è¾“å…¥æµçš„çˆ¶ç±»ã€‚

`InputStream` å¸¸ç”¨æ–¹æ³• ï¼š

- `read()` ï¼šè¿”å›è¾“å…¥æµä¸­ä¸‹ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚è¿”å›çš„å€¼ä»‹äº 0 åˆ° 255 ä¹‹é—´ã€‚å¦‚æœæœªè¯»å–ä»»ä½•å­—èŠ‚ï¼Œåˆ™ä»£ç è¿”å› `-1` ï¼Œè¡¨ç¤ºæ–‡ä»¶ç»“æŸã€‚
- `read(byte b[ ])` : ä»è¾“å…¥æµä¸­è¯»å–ä¸€äº›å­—èŠ‚å­˜å‚¨åˆ°æ•°ç»„ `b` ä¸­ã€‚å¦‚æœæ•°ç»„ `b` çš„é•¿åº¦ä¸ºé›¶ï¼Œåˆ™ä¸è¯»å–ã€‚å¦‚æœæ²¡æœ‰å¯ç”¨å­—èŠ‚è¯»å–ï¼Œè¿”å› `-1`ã€‚å¦‚æœæœ‰å¯ç”¨å­—èŠ‚è¯»å–ï¼Œåˆ™æœ€å¤šè¯»å–çš„å­—èŠ‚æ•°æœ€å¤šç­‰äº `b.length` ï¼Œ è¿”å›è¯»å–çš„å­—èŠ‚æ•°ã€‚è¿™ä¸ªæ–¹æ³•ç­‰ä»·äº `read(b, 0, b.length)`ã€‚
- `read(byte b[], int off, int len)` ï¼šåœ¨`read(byte b[ ])` æ–¹æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº† `off` å‚æ•°ï¼ˆåç§»é‡ï¼‰å’Œ `len` å‚æ•°ï¼ˆè¦è¯»å–çš„æœ€å¤§å­—èŠ‚æ•°ï¼‰ã€‚
- `skip(long n)` ï¼šå¿½ç•¥è¾“å…¥æµä¸­çš„ n ä¸ªå­—èŠ‚ ,è¿”å›å®é™…å¿½ç•¥çš„å­—èŠ‚æ•°ã€‚
- `available()` ï¼šè¿”å›è¾“å…¥æµä¸­å¯ä»¥è¯»å–çš„å­—èŠ‚æ•°ã€‚
- `close()` ï¼šå…³é—­è¾“å…¥æµé‡Šæ”¾ç›¸å…³çš„ç³»ç»Ÿèµ„æºã€‚

ä» Java 9 å¼€å§‹ï¼Œ`InputStream` æ–°å¢åŠ äº†å¤šä¸ªå®ç”¨çš„æ–¹æ³•ï¼š

- `readAllBytes()` ï¼šè¯»å–è¾“å…¥æµä¸­çš„æ‰€æœ‰å­—èŠ‚ï¼Œè¿”å›å­—èŠ‚æ•°ç»„ã€‚
- `readNBytes(byte[] b, int off, int len)` ï¼šé˜»å¡ç›´åˆ°è¯»å– `len` ä¸ªå­—èŠ‚ã€‚
- `transferTo(OutputStream out)` ï¼š å°†æ‰€æœ‰å­—èŠ‚ä»ä¸€ä¸ªè¾“å…¥æµä¼ é€’åˆ°ä¸€ä¸ªè¾“å‡ºæµã€‚

`FileInputStream` æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„å­—èŠ‚è¾“å…¥æµå¯¹è±¡ï¼Œå¯ç›´æ¥æŒ‡å®šæ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥ç›´æ¥è¯»å–å•å­—èŠ‚æ•°æ®ï¼Œä¹Ÿå¯ä»¥è¯»å–è‡³å­—èŠ‚æ•°ç»„ä¸­ã€‚

`FileInputStream` ä»£ç ç¤ºä¾‹ï¼š

```java
try (InputStream fis = new FileInputStream("input.txt")) {
    System.out.println("Number of remaining bytes:"
            + fis.available());
    int content;
    long skip = fis.skip(2);
    System.out.println("The actual number of bytes skipped:" + skip);
    System.out.print("The content read from file:");
    while ((content = fis.read()) != -1) {
        System.out.print((char) content);
    }
} catch (IOException e) {
    e.printStackTrace();
}
```

`input.txt` æ–‡ä»¶å†…å®¹ï¼š

![img](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/image-20220419155214614.png)

è¾“å‡ºï¼š

```text
Number of remaining bytes:11
The actual number of bytes skipped:2
The content read from file:JavaGuide
```

ä¸è¿‡ï¼Œä¸€èˆ¬æˆ‘ä»¬æ˜¯ä¸ä¼šç›´æ¥å•ç‹¬ä½¿ç”¨ `FileInputStream` ï¼Œé€šå¸¸ä¼šé…åˆ `BufferedInputStream`ï¼ˆå­—èŠ‚ç¼“å†²è¾“å…¥æµï¼Œåæ–‡ä¼šè®²åˆ°ï¼‰æ¥ä½¿ç”¨ã€‚

åƒä¸‹é¢è¿™æ®µä»£ç åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­å°±æ¯”è¾ƒå¸¸è§ï¼Œæˆ‘ä»¬é€šè¿‡ `readAllBytes()` è¯»å–è¾“å…¥æµæ‰€æœ‰å­—èŠ‚å¹¶å°†å…¶ç›´æ¥èµ‹å€¼ç»™ä¸€ä¸ª `String` å¯¹è±¡ã€‚

```java
// æ–°å»ºä¸€ä¸ª BufferedInputStream å¯¹è±¡
BufferedInputStream bufferedInputStream = new BufferedInputStream(new FileInputStream("input.txt"));
// è¯»å–æ–‡ä»¶çš„å†…å®¹å¹¶å¤åˆ¶åˆ° String å¯¹è±¡ä¸­
String result = new String(bufferedInputStream.readAllBytes());
System.out.println(result);
```

`DataInputStream` ç”¨äºè¯»å–æŒ‡å®šç±»å‹æ•°æ®ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»ç»“åˆ `FileInputStream` ã€‚

```java
FileInputStream fileInputStream = new FileInputStream("input.txt");
//å¿…é¡»å°†fileInputStreamä½œä¸ºæ„é€ å‚æ•°æ‰èƒ½ä½¿ç”¨
DataInputStream dataInputStream = new DataInputStream(fileInputStream);
//å¯ä»¥è¯»å–ä»»æ„å…·ä½“çš„ç±»å‹æ•°æ®
dataInputStream.readBoolean();
dataInputStream.readInt();
dataInputStream.readUTF();
```

`ObjectInputStream` ç”¨äºä»è¾“å…¥æµä¸­è¯»å– Java å¯¹è±¡ï¼ˆååºåˆ—åŒ–ï¼‰ï¼Œ`ObjectOutputStream` ç”¨äºå°†å¯¹è±¡å†™å…¥åˆ°è¾“å‡ºæµ(åºåˆ—åŒ–)ã€‚

```java
ObjectInputStream input = new ObjectInputStream(new FileInputStream("object.data"));
MyClass object = (MyClass) input.readObject();
input.close();
```

å¦å¤–ï¼Œç”¨äºåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ç±»å¿…é¡»å®ç° `Serializable` æ¥å£ï¼Œå¯¹è±¡ä¸­å¦‚æœæœ‰å±æ€§ä¸æƒ³è¢«åºåˆ—åŒ–ï¼Œä½¿ç”¨ `transient` ä¿®é¥°ã€‚

### OutputStreamï¼ˆå­—èŠ‚è¾“å‡ºæµï¼‰

`OutputStream`ç”¨äºå°†æ•°æ®ï¼ˆå­—èŠ‚ä¿¡æ¯ï¼‰å†™å…¥åˆ°ç›®çš„åœ°ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶ï¼‰ï¼Œ`java.io.OutputStream`æŠ½è±¡ç±»æ˜¯æ‰€æœ‰å­—èŠ‚è¾“å‡ºæµçš„çˆ¶ç±»ã€‚

`OutputStream` å¸¸ç”¨æ–¹æ³• ï¼š

- `write(int b)` ï¼šå°†ç‰¹å®šå­—èŠ‚å†™å…¥è¾“å‡ºæµã€‚
- `write(byte b[ ])` : å°†æ•°ç»„`b` å†™å…¥åˆ°è¾“å‡ºæµï¼Œç­‰ä»·äº `write(b, 0, b.length)` ã€‚
- `write(byte[] b, int off, int len)` : åœ¨`write(byte b[ ])` æ–¹æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº† `off` å‚æ•°ï¼ˆåç§»é‡ï¼‰å’Œ `len` å‚æ•°ï¼ˆè¦è¯»å–çš„æœ€å¤§å­—èŠ‚æ•°ï¼‰ã€‚
- `flush()` ï¼šåˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶å†™å‡ºæ‰€æœ‰ç¼“å†²çš„è¾“å‡ºå­—èŠ‚ã€‚
- `close()` ï¼šå…³é—­è¾“å‡ºæµé‡Šæ”¾ç›¸å…³çš„ç³»ç»Ÿèµ„æºã€‚

`FileOutputStream` æ˜¯æœ€å¸¸ç”¨çš„å­—èŠ‚è¾“å‡ºæµå¯¹è±¡ï¼Œå¯ç›´æ¥æŒ‡å®šæ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥ç›´æ¥è¾“å‡ºå•å­—èŠ‚æ•°æ®ï¼Œä¹Ÿå¯ä»¥è¾“å‡ºæŒ‡å®šçš„å­—èŠ‚æ•°ç»„ã€‚

`FileOutputStream` ä»£ç ç¤ºä¾‹ï¼š



```java
try (FileOutputStream output = new FileOutputStream("output.txt")) {
    byte[] array = "JavaGuide".getBytes();
    output.write(array);
} catch (IOException e) {
    e.printStackTrace();
}
```

1
2
3
4
5
6

è¿è¡Œç»“æœï¼š

![img](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/image-20220419155514392.png)

ç±»ä¼¼äº `FileInputStream`ï¼Œ`FileOutputStream` é€šå¸¸ä¹Ÿä¼šé…åˆ `BufferedOutputStream`ï¼ˆå­—èŠ‚ç¼“å†²è¾“å‡ºæµï¼Œåæ–‡ä¼šè®²åˆ°ï¼‰æ¥ä½¿ç”¨ã€‚

```java
FileOutputStream fileOutputStream = new FileOutputStream("output.txt");
BufferedOutputStream bos = new BufferedOutputStream(fileOutputStream)
```

**`DataOutputStream`** ç”¨äºå†™å…¥æŒ‡å®šç±»å‹æ•°æ®ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»ç»“åˆ `FileOutputStream`

```java
// è¾“å‡ºæµ
FileOutputStream fileOutputStream = new FileOutputStream("out.txt");
DataOutputStream dataOutputStream = new DataOutputStream(fileOutputStream);
// è¾“å‡ºä»»æ„æ•°æ®ç±»å‹
dataOutputStream.writeBoolean(true);
dataOutputStream.writeByte(1);
```

`ObjectInputStream` ç”¨äºä»è¾“å…¥æµä¸­è¯»å– Java å¯¹è±¡ï¼ˆ`ObjectInputStream`,ååºåˆ—åŒ–ï¼‰ï¼Œ`ObjectOutputStream`å°†å¯¹è±¡å†™å…¥åˆ°è¾“å‡ºæµ(`ObjectOutputStream`ï¼Œåºåˆ—åŒ–)ã€‚

```java
ObjectOutputStream output = new ObjectOutputStream(new FileOutputStream("file.txt")
Person person = new Person("Guideå“¥", "JavaGuideä½œè€…");
output.writeObject(person);
```

## å­—ç¬¦æµ

ä¸ç®¡æ˜¯æ–‡ä»¶è¯»å†™è¿˜æ˜¯ç½‘ç»œå‘é€æ¥æ”¶ï¼Œä¿¡æ¯çš„æœ€å°å­˜å‚¨å•å…ƒéƒ½æ˜¯å­—èŠ‚ã€‚ **é‚£ä¸ºä»€ä¹ˆ I/O æµæ“ä½œè¦åˆ†ä¸ºå­—èŠ‚æµæ“ä½œå’Œå­—ç¬¦æµæ“ä½œå‘¢ï¼Ÿ**

ä¸ªäººè®¤ä¸ºä¸»è¦æœ‰ä¸¤ç‚¹åŸå› ï¼š

- å­—ç¬¦æµæ˜¯ç”± Java è™šæ‹Ÿæœºå°†å­—èŠ‚è½¬æ¢å¾—åˆ°çš„ï¼Œè¿™ä¸ªè¿‡ç¨‹è¿˜ç®—æ˜¯æ¯”è¾ƒè€—æ—¶ã€‚
- å¦‚æœæˆ‘ä»¬ä¸çŸ¥é“ç¼–ç ç±»å‹å°±å¾ˆå®¹æ˜“å‡ºç°ä¹±ç é—®é¢˜ã€‚

ä¹±ç é—®é¢˜è¿™ä¸ªå¾ˆå®¹æ˜“å°±å¯ä»¥å¤ç°ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ä¸Šé¢æåˆ°çš„ `FileInputStream` ä»£ç ç¤ºä¾‹ä¸­çš„ `input.txt` æ–‡ä»¶å†…å®¹æ”¹ä¸ºä¸­æ–‡å³å¯ï¼ŒåŸä»£ç ä¸éœ€è¦æ”¹åŠ¨ã€‚

![img](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/image-20220419154632551.png)

è¾“å‡ºï¼š

```java
Number of remaining bytes:9
The actual number of bytes skipped:2
The content read from file:Â§Ã¥Â®Â¶Ã¥Â¥Â½
```

å¯ä»¥å¾ˆæ˜æ˜¾åœ°çœ‹åˆ°è¯»å–å‡ºæ¥çš„å†…å®¹å·²ç»å˜æˆäº†ä¹±ç ã€‚

å› æ­¤ï¼ŒI/O æµå°±å¹²è„†æä¾›äº†ä¸€ä¸ªç›´æ¥æ“ä½œå­—ç¬¦çš„æ¥å£ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¹³æ—¶å¯¹å­—ç¬¦è¿›è¡Œæµæ“ä½œã€‚å¦‚æœéŸ³é¢‘æ–‡ä»¶ã€å›¾ç‰‡ç­‰åª’ä½“æ–‡ä»¶ç”¨å­—èŠ‚æµæ¯”è¾ƒå¥½ï¼Œå¦‚æœæ¶‰åŠåˆ°å­—ç¬¦çš„è¯ä½¿ç”¨å­—ç¬¦æµæ¯”è¾ƒå¥½ã€‚

å­—ç¬¦æµé»˜è®¤é‡‡ç”¨çš„æ˜¯ `Unicode` ç¼–ç ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ æ–¹æ³•è‡ªå®šä¹‰ç¼–ç ã€‚é¡ºä¾¿åˆ†äº«ä¸€ä¸‹ä¹‹å‰é‡åˆ°çš„ç¬”è¯•é¢˜ï¼šå¸¸ç”¨å­—ç¬¦ç¼–ç æ‰€å å­—èŠ‚æ•°ï¼Ÿ`utf8` :è‹±æ–‡å  1 å­—èŠ‚ï¼Œä¸­æ–‡å  3 å­—èŠ‚ï¼Œ`unicode`ï¼šä»»ä½•å­—ç¬¦éƒ½å  2 ä¸ªå­—èŠ‚ï¼Œ`gbk`ï¼šè‹±æ–‡å  1 å­—èŠ‚ï¼Œä¸­æ–‡å  2 å­—èŠ‚ã€‚

### Readerï¼ˆå­—ç¬¦è¾“å…¥æµï¼‰

`Reader`ç”¨äºä»æºå¤´ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶ï¼‰è¯»å–æ•°æ®ï¼ˆå­—ç¬¦ä¿¡æ¯ï¼‰åˆ°å†…å­˜ä¸­ï¼Œ`java.io.Reader`æŠ½è±¡ç±»æ˜¯æ‰€æœ‰å­—ç¬¦è¾“å…¥æµçš„çˆ¶ç±»ã€‚

`Reader` ç”¨äºè¯»å–æ–‡æœ¬ï¼Œ `InputStream` ç”¨äºè¯»å–åŸå§‹å­—èŠ‚ã€‚

`Reader` å¸¸ç”¨æ–¹æ³• ï¼š

- `read()` : ä»è¾“å…¥æµè¯»å–ä¸€ä¸ªå­—ç¬¦ã€‚
- `read(char[] cbuf)` : ä»è¾“å…¥æµä¸­è¯»å–ä¸€äº›å­—ç¬¦ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°å­—ç¬¦æ•°ç»„ `cbuf`ä¸­ï¼Œç­‰ä»·äº `read(cbuf, 0, cbuf.length)` ã€‚
- `read(char[] cbuf, int off, int len)` ï¼šåœ¨`read(char[] cbuf)` æ–¹æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº† `off` å‚æ•°ï¼ˆåç§»é‡ï¼‰å’Œ `len` å‚æ•°ï¼ˆè¦è¯»å–çš„æœ€å¤§å­—èŠ‚æ•°ï¼‰ã€‚
- `skip(long n)` ï¼šå¿½ç•¥è¾“å…¥æµä¸­çš„ n ä¸ªå­—ç¬¦ ,è¿”å›å®é™…å¿½ç•¥çš„å­—ç¬¦æ•°ã€‚
- `close()` : å…³é—­è¾“å…¥æµå¹¶é‡Šæ”¾ç›¸å…³çš„ç³»ç»Ÿèµ„æºã€‚

`InputStreamReader` æ˜¯å­—èŠ‚æµè½¬æ¢ä¸ºå­—ç¬¦æµçš„æ¡¥æ¢ï¼Œå…¶å­ç±» `FileReader` æ˜¯åŸºäºè¯¥åŸºç¡€ä¸Šçš„å°è£…ï¼Œå¯ä»¥ç›´æ¥æ“ä½œå­—ç¬¦æ–‡ä»¶ã€‚

```java
// å­—èŠ‚æµè½¬æ¢ä¸ºå­—ç¬¦æµçš„æ¡¥æ¢
public class InputStreamReader extends Reader {
}
// ç”¨äºè¯»å–å­—ç¬¦æ–‡ä»¶
public class FileReader extends InputStreamReader {
}
```

`FileReader` ä»£ç ç¤ºä¾‹ï¼š

```java
try (FileReader fileReader = new FileReader("input.txt");) {
    int content;
    long skip = fileReader.skip(3);
    System.out.println("The actual number of bytes skipped:" + skip);
    System.out.print("The content read from file:");
    while ((content = fileReader.read()) != -1) {
        System.out.print((char) content);
    }
} catch (IOException e) {
    e.printStackTrace();
}
```

`input.txt` æ–‡ä»¶å†…å®¹ï¼š

![img](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/image-20220419154632551.png)

è¾“å‡ºï¼š

```text
The actual number of bytes skipped:3
The content read from file:æˆ‘æ˜¯Guideã€‚
```

### Writerï¼ˆå­—ç¬¦è¾“å‡ºæµï¼‰

`Writer`ç”¨äºå°†æ•°æ®ï¼ˆå­—ç¬¦ä¿¡æ¯ï¼‰å†™å…¥åˆ°ç›®çš„åœ°ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶ï¼‰ï¼Œ`java.io.Writer`æŠ½è±¡ç±»æ˜¯æ‰€æœ‰å­—èŠ‚è¾“å‡ºæµçš„çˆ¶ç±»ã€‚

`Writer` å¸¸ç”¨æ–¹æ³• ï¼š

- `write(int c)` : å†™å…¥å•ä¸ªå­—ç¬¦ã€‚
- `write(char[] cbuf)` ï¼šå†™å…¥å­—ç¬¦æ•°ç»„ `cbuf`ï¼Œç­‰ä»·äº`write(cbuf, 0, cbuf.length)`ã€‚
- `write(char[] cbuf, int off, int len)` ï¼šåœ¨`write(char[] cbuf)` æ–¹æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº† `off` å‚æ•°ï¼ˆåç§»é‡ï¼‰å’Œ `len` å‚æ•°ï¼ˆè¦è¯»å–çš„æœ€å¤§å­—èŠ‚æ•°ï¼‰ã€‚
- `write(String str)` ï¼šå†™å…¥å­—ç¬¦ä¸²ï¼Œç­‰ä»·äº `write(str, 0, str.length())` ã€‚
- `write(String str, int off, int len)` ï¼šåœ¨`write(String str)` æ–¹æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº† `off` å‚æ•°ï¼ˆåç§»é‡ï¼‰å’Œ `len` å‚æ•°ï¼ˆè¦è¯»å–çš„æœ€å¤§å­—èŠ‚æ•°ï¼‰ã€‚
- `append(CharSequence csq)` ï¼šå°†æŒ‡å®šçš„å­—ç¬¦åºåˆ—é™„åŠ åˆ°æŒ‡å®šçš„ `Writer` å¯¹è±¡å¹¶è¿”å›è¯¥ `Writer` å¯¹è±¡ã€‚
- `append(char c)` ï¼šå°†æŒ‡å®šçš„å­—ç¬¦é™„åŠ åˆ°æŒ‡å®šçš„ `Writer` å¯¹è±¡å¹¶è¿”å›è¯¥ `Writer` å¯¹è±¡ã€‚
- `flush()` ï¼šåˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶å†™å‡ºæ‰€æœ‰ç¼“å†²çš„è¾“å‡ºå­—ç¬¦ã€‚
- `close()`:å…³é—­è¾“å‡ºæµé‡Šæ”¾ç›¸å…³çš„ç³»ç»Ÿèµ„æºã€‚

`OutputStreamWriter` æ˜¯å­—ç¬¦æµè½¬æ¢ä¸ºå­—èŠ‚æµçš„æ¡¥æ¢ï¼Œå…¶å­ç±» `FileWriter` æ˜¯åŸºäºè¯¥åŸºç¡€ä¸Šçš„å°è£…ï¼Œå¯ä»¥ç›´æ¥å°†å­—ç¬¦å†™å…¥åˆ°æ–‡ä»¶ã€‚

```java
// å­—ç¬¦æµè½¬æ¢ä¸ºå­—èŠ‚æµçš„æ¡¥æ¢
public class OutputStreamWriter extends Writer {
}
// ç”¨äºå†™å…¥å­—ç¬¦åˆ°æ–‡ä»¶
public class FileWriter extends OutputStreamWriter {
}
```

`FileWriter` ä»£ç ç¤ºä¾‹ï¼š

```java
try (Writer output = new FileWriter("output.txt")) {
    output.write("ä½ å¥½ï¼Œæˆ‘æ˜¯Guideã€‚");
} catch (IOException e) {
    e.printStackTrace();
}
```

è¾“å‡ºç»“æœï¼š

![img](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/image-20220419155802288.png)

## å­—èŠ‚ç¼“å†²æµ

IO æ“ä½œæ˜¯å¾ˆæ¶ˆè€—æ€§èƒ½çš„ï¼Œç¼“å†²æµå°†æ•°æ®åŠ è½½è‡³ç¼“å†²åŒºï¼Œä¸€æ¬¡æ€§è¯»å–/å†™å…¥å¤šä¸ªå­—èŠ‚ï¼Œä»è€Œé¿å…é¢‘ç¹çš„ IO æ“ä½œï¼Œæé«˜æµçš„ä¼ è¾“æ•ˆç‡ã€‚

å­—èŠ‚ç¼“å†²æµè¿™é‡Œé‡‡ç”¨äº†è£…é¥°å™¨æ¨¡å¼æ¥å¢å¼º `InputStream` å’Œ`OutputStream`å­ç±»å¯¹è±¡çš„åŠŸèƒ½ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `BufferedInputStream`ï¼ˆå­—èŠ‚ç¼“å†²è¾“å…¥æµï¼‰æ¥å¢å¼º `FileInputStream` çš„åŠŸèƒ½ã€‚

```java
// æ–°å»ºä¸€ä¸ª BufferedInputStream å¯¹è±¡
BufferedInputStream bufferedInputStream = new BufferedInputStream(new FileInputStream("input.txt"));
```

å­—èŠ‚æµå’Œå­—èŠ‚ç¼“å†²æµçš„æ€§èƒ½å·®åˆ«ä¸»è¦ä½“ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ä¸¤è€…çš„æ—¶å€™éƒ½æ˜¯è°ƒç”¨ `write(int b)` å’Œ `read()` è¿™ä¸¤ä¸ªä¸€æ¬¡åªè¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ–¹æ³•çš„æ—¶å€™ã€‚ç”±äºå­—èŠ‚ç¼“å†²æµå†…éƒ¨æœ‰ç¼“å†²åŒºï¼ˆå­—èŠ‚æ•°ç»„ï¼‰ï¼Œå› æ­¤ï¼Œå­—èŠ‚ç¼“å†²æµä¼šå…ˆå°†è¯»å–åˆ°çš„å­—èŠ‚å­˜æ”¾åœ¨ç¼“å­˜åŒºï¼Œå¤§å¹…å‡å°‘ IO æ¬¡æ•°ï¼Œæé«˜è¯»å–æ•ˆç‡ã€‚

æˆ‘ä½¿ç”¨ `write(int b)` å’Œ `read()` æ–¹æ³•ï¼Œåˆ†åˆ«é€šè¿‡å­—èŠ‚æµå’Œå­—èŠ‚ç¼“å†²æµå¤åˆ¶ä¸€ä¸ª `524.9 mb` çš„ PDF æ–‡ä»¶è€—æ—¶å¯¹æ¯”å¦‚ä¸‹ï¼š

```text
ä½¿ç”¨ç¼“å†²æµå¤åˆ¶PDFæ–‡ä»¶æ€»è€—æ—¶:15428 æ¯«ç§’
ä½¿ç”¨æ™®é€šå­—èŠ‚æµå¤åˆ¶PDFæ–‡ä»¶æ€»è€—æ—¶:2555062 æ¯«ç§’
```

ä¸¤è€…è€—æ—¶å·®åˆ«éå¸¸å¤§ï¼Œç¼“å†²æµè€—è´¹çš„æ—¶é—´æ˜¯å­—èŠ‚æµçš„ 1/165ã€‚

æµ‹è¯•ä»£ç å¦‚ä¸‹:

```java
@Test
void copy_pdf_to_another_pdf_buffer_stream() {
    // è®°å½•å¼€å§‹æ—¶é—´
    long start = System.currentTimeMillis();
    try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream("æ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿ.pdf"));
         BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream("æ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿ-å‰¯æœ¬.pdf"))) {
        int content;
        while ((content = bis.read()) != -1) {
            bos.write(content);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    // è®°å½•ç»“æŸæ—¶é—´
    long end = System.currentTimeMillis();
    System.out.println("ä½¿ç”¨ç¼“å†²æµå¤åˆ¶PDFæ–‡ä»¶æ€»è€—æ—¶:" + (end - start) + " æ¯«ç§’");
}

@Test
void copy_pdf_to_another_pdf_stream() {
    // è®°å½•å¼€å§‹æ—¶é—´
    long start = System.currentTimeMillis();
    try (FileInputStream fis = new FileInputStream("æ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿ.pdf");
         FileOutputStream fos = new FileOutputStream("æ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿ-å‰¯æœ¬.pdf")) {
        int content;
        while ((content = fis.read()) != -1) {
            fos.write(content);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    // è®°å½•ç»“æŸæ—¶é—´
    long end = System.currentTimeMillis();
    System.out.println("ä½¿ç”¨æ™®é€šæµå¤åˆ¶PDFæ–‡ä»¶æ€»è€—æ—¶:" + (end - start) + " æ¯«ç§’");
}
```

å¦‚æœæ˜¯è°ƒç”¨ `read(byte b[])` å’Œ `write(byte b[], int off, int len)` è¿™ä¸¤ä¸ªå†™å…¥ä¸€ä¸ªå­—èŠ‚æ•°ç»„çš„æ–¹æ³•çš„è¯ï¼Œåªè¦å­—èŠ‚æ•°ç»„çš„å¤§å°åˆé€‚ï¼Œä¸¤è€…çš„æ€§èƒ½å·®è·å…¶å®ä¸å¤§ï¼ŒåŸºæœ¬å¯ä»¥å¿½ç•¥ã€‚

è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨ `read(byte b[])` å’Œ `write(byte b[], int off, int len)` æ–¹æ³•ï¼Œåˆ†åˆ«é€šè¿‡å­—èŠ‚æµå’Œå­—èŠ‚ç¼“å†²æµå¤åˆ¶ä¸€ä¸ª 524.9 mb çš„ PDF æ–‡ä»¶è€—æ—¶å¯¹æ¯”å¦‚ä¸‹ï¼š

```text
ä½¿ç”¨ç¼“å†²æµå¤åˆ¶PDFæ–‡ä»¶æ€»è€—æ—¶:695 æ¯«ç§’
ä½¿ç”¨æ™®é€šå­—èŠ‚æµå¤åˆ¶PDFæ–‡ä»¶æ€»è€—æ—¶:989 æ¯«ç§’
```

ä¸¤è€…è€—æ—¶å·®åˆ«ä¸æ˜¯å¾ˆå¤§ï¼Œç¼“å†²æµçš„æ€§èƒ½è¦ç•¥å¾®å¥½ä¸€ç‚¹ç‚¹ã€‚

æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š

```java
@Test
void copy_pdf_to_another_pdf_with_byte_array_buffer_stream() {
    // è®°å½•å¼€å§‹æ—¶é—´
    long start = System.currentTimeMillis();
    try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream("æ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿ.pdf"));
         BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream("æ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿ-å‰¯æœ¬.pdf"))) {
        int len;
        byte[] bytes = new byte[4 * 1024];
        while ((len = bis.read(bytes)) != -1) {
            bos.write(bytes, 0, len);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    // è®°å½•ç»“æŸæ—¶é—´
    long end = System.currentTimeMillis();
    System.out.println("ä½¿ç”¨ç¼“å†²æµå¤åˆ¶PDFæ–‡ä»¶æ€»è€—æ—¶:" + (end - start) + " æ¯«ç§’");
}

@Test
void copy_pdf_to_another_pdf_with_byte_array_stream() {
    // è®°å½•å¼€å§‹æ—¶é—´
    long start = System.currentTimeMillis();
    try (FileInputStream fis = new FileInputStream("æ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿ.pdf");
         FileOutputStream fos = new FileOutputStream("æ·±å…¥ç†è§£è®¡ç®—æœºæ“ä½œç³»ç»Ÿ-å‰¯æœ¬.pdf")) {
        int len;
        byte[] bytes = new byte[4 * 1024];
        while ((len = fis.read(bytes)) != -1) {
            fos.write(bytes, 0, len);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    // è®°å½•ç»“æŸæ—¶é—´
    long end = System.currentTimeMillis();
    System.out.println("ä½¿ç”¨æ™®é€šæµå¤åˆ¶PDFæ–‡ä»¶æ€»è€—æ—¶:" + (end - start) + " æ¯«ç§’");
}
```

### BufferedInputStreamï¼ˆå­—èŠ‚ç¼“å†²è¾“å…¥æµï¼‰

`BufferedInputStream` ä»æºå¤´ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶ï¼‰è¯»å–æ•°æ®ï¼ˆå­—èŠ‚ä¿¡æ¯ï¼‰åˆ°å†…å­˜çš„è¿‡ç¨‹ä¸­ä¸ä¼šä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚çš„è¯»å–ï¼Œè€Œæ˜¯ä¼šå…ˆå°†è¯»å–åˆ°çš„å­—èŠ‚å­˜æ”¾åœ¨ç¼“å­˜åŒºï¼Œå¹¶ä»å†…éƒ¨ç¼“å†²åŒºä¸­å•ç‹¬è¯»å–å­—èŠ‚ã€‚è¿™æ ·å¤§å¹…å‡å°‘äº† IO æ¬¡æ•°ï¼Œæé«˜äº†è¯»å–æ•ˆç‡ã€‚

`BufferedInputStream` å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªç¼“å†²åŒºï¼Œè¿™ä¸ªç¼“å†²åŒºå®é™…å°±æ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œé€šè¿‡é˜…è¯» `BufferedInputStream` æºç å³å¯å¾—åˆ°è¿™ä¸ªç»“è®ºã€‚

```java
public
class BufferedInputStream extends FilterInputStream {
    // å†…éƒ¨ç¼“å†²åŒºæ•°ç»„
    protected volatile byte buf[];
    // ç¼“å†²åŒºçš„é»˜è®¤å¤§å°
    private static int DEFAULT_BUFFER_SIZE = 8192;
    // ä½¿ç”¨é»˜è®¤çš„ç¼“å†²åŒºå¤§å°
    public BufferedInputStream(InputStream in) {
        this(in, DEFAULT_BUFFER_SIZE);
    }
    // è‡ªå®šä¹‰ç¼“å†²åŒºå¤§å°
    public BufferedInputStream(InputStream in, int size) {
        super(in);
        if (size <= 0) {
            throw new IllegalArgumentException("Buffer size <= 0");
        }
        buf = new byte[size];
    }
}
```

ç¼“å†²åŒºçš„å¤§å°é»˜è®¤ä¸º **8192** å­—èŠ‚ï¼Œå½“ç„¶äº†ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ `BufferedInputStream(InputStream in, int size)` è¿™ä¸ªæ„é€ æ–¹æ³•æ¥æŒ‡å®šç¼“å†²åŒºçš„å¤§å°ã€‚

### BufferedOutputStreamï¼ˆå­—èŠ‚ç¼“å†²è¾“å‡ºæµï¼‰

`BufferedOutputStream` å°†æ•°æ®ï¼ˆå­—èŠ‚ä¿¡æ¯ï¼‰å†™å…¥åˆ°ç›®çš„åœ°ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶ï¼‰çš„è¿‡ç¨‹ä¸­ä¸ä¼šä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚çš„å†™å…¥ï¼Œè€Œæ˜¯ä¼šå…ˆå°†è¦å†™å…¥çš„å­—èŠ‚å­˜æ”¾åœ¨ç¼“å­˜åŒºï¼Œå¹¶ä»å†…éƒ¨ç¼“å†²åŒºä¸­å•ç‹¬å†™å…¥å­—èŠ‚ã€‚è¿™æ ·å¤§å¹…å‡å°‘äº† IO æ¬¡æ•°ï¼Œæé«˜äº†è¯»å–æ•ˆç‡

```java
try (BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream("output.txt"))) {
    byte[] array = "JavaGuide".getBytes();
    bos.write(array);
} catch (IOException e) {
    e.printStackTrace();
}
```

ç±»ä¼¼äº `BufferedInputStream` ï¼Œ`BufferedOutputStream` å†…éƒ¨ä¹Ÿç»´æŠ¤äº†ä¸€ä¸ªç¼“å†²åŒºï¼Œå¹¶ä¸”ï¼Œè¿™ä¸ªç¼“å­˜åŒºçš„å¤§å°ä¹Ÿæ˜¯ **8192** å­—èŠ‚ã€‚

## å­—ç¬¦ç¼“å†²æµ

`BufferedReader` ï¼ˆå­—ç¬¦ç¼“å†²è¾“å…¥æµï¼‰å’Œ `BufferedWriter`ï¼ˆå­—ç¬¦ç¼“å†²è¾“å‡ºæµï¼‰ç±»ä¼¼äº `BufferedInputStream`ï¼ˆå­—èŠ‚ç¼“å†²è¾“å…¥æµï¼‰å’Œ`BufferedOutputStream`ï¼ˆå­—èŠ‚ç¼“å†²è¾“å…¥æµï¼‰ï¼Œå†…éƒ¨éƒ½ç»´æŠ¤äº†ä¸€ä¸ªå­—èŠ‚æ•°ç»„ä½œä¸ºç¼“å†²åŒºã€‚ä¸è¿‡ï¼Œå‰è€…ä¸»è¦æ˜¯ç”¨æ¥æ“ä½œå­—ç¬¦ä¿¡æ¯ã€‚

## æ‰“å°æµ

ä¸‹é¢è¿™æ®µä»£ç å¤§å®¶ç»å¸¸ä½¿ç”¨å§ï¼Ÿ

```java
System.out.print("Helloï¼");
System.out.println("Helloï¼");
```

`System.out` å®é™…æ˜¯ç”¨äºè·å–ä¸€ä¸ª `PrintStream` å¯¹è±¡ï¼Œ`print`æ–¹æ³•å®é™…è°ƒç”¨çš„æ˜¯ `PrintStream` å¯¹è±¡çš„ `write` æ–¹æ³•ã€‚

`PrintStream` å±äºå­—èŠ‚æ‰“å°æµï¼Œä¸ä¹‹å¯¹åº”çš„æ˜¯ `PrintWriter` ï¼ˆå­—ç¬¦æ‰“å°æµï¼‰ã€‚`PrintStream` æ˜¯ `OutputStream` çš„å­ç±»ï¼Œ`PrintWriter` æ˜¯ `Writer` çš„å­ç±»ã€‚

```java
public class PrintStream extends FilterOutputStream
    implements Appendable, Closeable {
}
public class PrintWriter extends Writer {
}
```

## éšæœºè®¿é—®æµ

è¿™é‡Œè¦ä»‹ç»çš„éšæœºè®¿é—®æµæŒ‡çš„æ˜¯æ”¯æŒéšæ„è·³è½¬åˆ°æ–‡ä»¶çš„ä»»æ„ä½ç½®è¿›è¡Œè¯»å†™çš„ `RandomAccessFile` ã€‚

`RandomAccessFile` çš„æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®š `mode`ï¼ˆè¯»å†™æ¨¡å¼ï¼‰ã€‚

```java
// openAndDelete å‚æ•°é»˜è®¤ä¸º false è¡¨ç¤ºæ‰“å¼€æ–‡ä»¶å¹¶ä¸”è¿™ä¸ªæ–‡ä»¶ä¸ä¼šè¢«åˆ é™¤
public RandomAccessFile(File file, String mode)
    throws FileNotFoundException {
    this(file, mode, false);
}
// ç§æœ‰æ–¹æ³•
private RandomAccessFile(File file, String mode, boolean openAndDelete)  throws FileNotFoundException{
  // çœç•¥å¤§éƒ¨åˆ†ä»£ç 
}
```

è¯»å†™æ¨¡å¼ä¸»è¦æœ‰ä¸‹é¢å››ç§ï¼š

- `r` : åªè¯»æ¨¡å¼ã€‚
- `rw`: è¯»å†™æ¨¡å¼
- `rws`: ç›¸å¯¹äº `rw`ï¼Œ`rws` åŒæ­¥æ›´æ–°å¯¹â€œæ–‡ä»¶çš„å†…å®¹â€æˆ–â€œå…ƒæ•°æ®â€çš„ä¿®æ”¹åˆ°å¤–éƒ¨å­˜å‚¨è®¾å¤‡ã€‚
- `rwd` : ç›¸å¯¹äº `rw`ï¼Œ`rwd` åŒæ­¥æ›´æ–°å¯¹â€œæ–‡ä»¶çš„å†…å®¹â€çš„ä¿®æ”¹åˆ°å¤–éƒ¨å­˜å‚¨è®¾å¤‡ã€‚

æ–‡ä»¶å†…å®¹æŒ‡çš„æ˜¯æ–‡ä»¶ä¸­å®é™…ä¿å­˜çš„æ•°æ®ï¼Œå…ƒæ•°æ®åˆ™æ˜¯ç”¨æ¥æè¿°æ–‡ä»¶å±æ€§æ¯”å¦‚æ–‡ä»¶çš„å¤§å°ä¿¡æ¯ã€åˆ›å»ºå’Œä¿®æ”¹æ—¶é—´ã€‚

`RandomAccessFile` ä¸­æœ‰ä¸€ä¸ªæ–‡ä»¶æŒ‡é’ˆç”¨æ¥è¡¨ç¤ºä¸‹ä¸€ä¸ªå°†è¦è¢«å†™å…¥æˆ–è€…è¯»å–çš„å­—èŠ‚æ‰€å¤„çš„ä½ç½®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ `RandomAccessFile` çš„ `seek(long pos)` æ–¹æ³•æ¥è®¾ç½®æ–‡ä»¶æŒ‡é’ˆçš„åç§»é‡ï¼ˆè·æ–‡ä»¶å¼€å¤´ `pos` ä¸ªå­—èŠ‚å¤„ï¼‰ã€‚å¦‚æœæƒ³è¦è·å–æ–‡ä»¶æŒ‡é’ˆå½“å‰çš„ä½ç½®çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ `getFilePointer()` æ–¹æ³•ã€‚

`RandomAccessFile` ä»£ç ç¤ºä¾‹ï¼š

```java
RandomAccessFile randomAccessFile = new RandomAccessFile(new File("input.txt"), "rw");
System.out.println("è¯»å–ä¹‹å‰çš„åç§»é‡ï¼š" + randomAccessFile.getFilePointer() + ",å½“å‰è¯»å–åˆ°çš„å­—ç¬¦" + (char) randomAccessFile.read() + "ï¼Œè¯»å–ä¹‹åçš„åç§»é‡ï¼š" + randomAccessFile.getFilePointer());
// æŒ‡é’ˆå½“å‰åç§»é‡ä¸º 6
randomAccessFile.seek(6);
System.out.println("è¯»å–ä¹‹å‰çš„åç§»é‡ï¼š" + randomAccessFile.getFilePointer() + ",å½“å‰è¯»å–åˆ°çš„å­—ç¬¦" + (char) randomAccessFile.read() + "ï¼Œè¯»å–ä¹‹åçš„åç§»é‡ï¼š" + randomAccessFile.getFilePointer());
// ä»åç§»é‡ 7 çš„ä½ç½®å¼€å§‹å¾€åå†™å…¥å­—èŠ‚æ•°æ®
randomAccessFile.write(new byte[]{'H', 'I', 'J', 'K'});
// æŒ‡é’ˆå½“å‰åç§»é‡ä¸º 0ï¼Œå›åˆ°èµ·å§‹ä½ç½®
randomAccessFile.seek(0);
System.out.println("è¯»å–ä¹‹å‰çš„åç§»é‡ï¼š" + randomAccessFile.getFilePointer() + ",å½“å‰è¯»å–åˆ°çš„å­—ç¬¦" + (char) randomAccessFile.read() + "ï¼Œè¯»å–ä¹‹åçš„åç§»é‡ï¼š" + randomAccessFile.getFilePointer());
```

`input.txt` æ–‡ä»¶å†…å®¹ï¼š

![img](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/image-20220421162050158.png)

è¾“å‡ºï¼š

```text
è¯»å–ä¹‹å‰çš„åç§»é‡ï¼š0,å½“å‰è¯»å–åˆ°çš„å­—ç¬¦Aï¼Œè¯»å–ä¹‹åçš„åç§»é‡ï¼š1
è¯»å–ä¹‹å‰çš„åç§»é‡ï¼š6,å½“å‰è¯»å–åˆ°çš„å­—ç¬¦Gï¼Œè¯»å–ä¹‹åçš„åç§»é‡ï¼š7
è¯»å–ä¹‹å‰çš„åç§»é‡ï¼š0,å½“å‰è¯»å–åˆ°çš„å­—ç¬¦Aï¼Œè¯»å–ä¹‹åçš„åç§»é‡ï¼š1
```

`input.txt` æ–‡ä»¶å†…å®¹å˜ä¸º `ABCDEFGHIJK` ã€‚

`RandomAccessFile` çš„ `write` æ–¹æ³•åœ¨å†™å…¥å¯¹è±¡çš„æ—¶å€™å¦‚æœå¯¹åº”çš„ä½ç½®å·²ç»æœ‰æ•°æ®çš„è¯ï¼Œä¼šå°†å…¶è¦†ç›–æ‰ã€‚

```java
RandomAccessFile randomAccessFile = new RandomAccessFile(new File("input.txt"), "rw");
randomAccessFile.write(new byte[]{'H', 'I', 'J', 'K'});
```

å‡è®¾è¿è¡Œä¸Šé¢è¿™æ®µç¨‹åºä¹‹å‰ `input.txt` æ–‡ä»¶å†…å®¹å˜ä¸º `ABCD` ï¼Œè¿è¡Œä¹‹ååˆ™å˜ä¸º `HIJK` ã€‚

`RandomAccessFile` æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªåº”ç”¨å°±æ˜¯å®ç°å¤§æ–‡ä»¶çš„ **æ–­ç‚¹ç»­ä¼ ** ã€‚ä½•è°“æ–­ç‚¹ç»­ä¼ ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯ä¸Šä¼ æ–‡ä»¶ä¸­é€”æš‚åœæˆ–å¤±è´¥ï¼ˆæ¯”å¦‚é‡åˆ°ç½‘ç»œé—®é¢˜ï¼‰ä¹‹åï¼Œä¸éœ€è¦é‡æ–°ä¸Šä¼ ï¼Œåªéœ€è¦ä¸Šä¼ é‚£äº›æœªæˆåŠŸä¸Šä¼ çš„æ–‡ä»¶åˆ†ç‰‡å³å¯ã€‚åˆ†ç‰‡ï¼ˆå…ˆå°†æ–‡ä»¶åˆ‡åˆ†æˆå¤šä¸ªæ–‡ä»¶åˆ†ç‰‡ï¼‰ä¸Šä¼ æ˜¯æ–­ç‚¹ç»­ä¼ çš„åŸºç¡€ã€‚

`RandomAccessFile` å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆå¹¶æ–‡ä»¶åˆ†ç‰‡ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

![img](https://img-blog.csdnimg.cn/20210609164749122.png)

æˆ‘åœ¨[ã€ŠJava é¢è¯•æŒ‡åŒ—ã€‹open in new window](https://javaguide.cn/zhuanlan/java-mian-shi-zhi-bei.html)ä¸­è¯¦ç»†ä»‹ç»äº†å¤§æ–‡ä»¶çš„ä¸Šä¼ é—®é¢˜ã€‚

![img](https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/github/javaguide/java/image-20220428104115362.png)

`RandomAccessFile` çš„å®ç°ä¾èµ–äº `FileDescriptor` (æ–‡ä»¶æè¿°ç¬¦) å’Œ `FileChannel` ï¼ˆå†…å­˜æ˜ å°„æ–‡ä»¶ï¼‰ã€‚



## å‚è€ƒæ–‡ç« 

- æœ¬æ–‡è½¬è½½äº[JavaGuide](https://javaguide.cn/java/io/io-basis.html)