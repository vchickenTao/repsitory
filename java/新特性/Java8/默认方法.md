# ğŸ¶ Java8 æ–°ç‰¹æ€§ - é»˜è®¤æ–¹æ³•

---

> [!NOTE]
>
> Java 8ä½¿ç”¨ä¸¤ä¸ªæ–°æ¦‚å¿µæ‰©å±•äº†æ¥å£çš„å«ä¹‰ï¼š`é»˜è®¤æ–¹æ³•`å’Œ`é™æ€æ–¹æ³•`ã€‚



## ä»€ä¹ˆæ˜¯é»˜è®¤æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆè¦æœ‰é»˜è®¤æ–¹æ³•

### å…ˆä¸Šä¾‹å­

ä¸€ä¸ªæ¥å£Aï¼ŒClazzç±»å®ç°äº†æ¥å£Aã€‚

```java
public interface A {
    default void foo(){
       System.out.println("Calling A.foo()");
    }
}

public class Clazz implements A {
    public static void main(String[] args){
       Clazz clazz = new Clazz();
       clazz.foo();//è°ƒç”¨A.foo()
    }
}
```

ä»£ç æ˜¯å¯ä»¥ç¼–è¯‘çš„ï¼Œå³ä½¿Clazzç±»å¹¶æ²¡æœ‰å®ç°foo()æ–¹æ³•ã€‚åœ¨æ¥å£Aä¸­æä¾›äº†foo()æ–¹æ³•çš„é»˜è®¤å®ç°ã€‚

### ä»€ä¹ˆæ˜¯é»˜è®¤æ–¹æ³•

é»˜è®¤æ–¹æ³•ä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨ä¸ç ´åäºŒè¿›åˆ¶å…¼å®¹æ€§çš„å‰æä¸‹ï¼Œå¾€ç°å­˜æ¥å£ä¸­æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œå³ä¸å¼ºåˆ¶é‚£äº›å®ç°äº†è¯¥æ¥å£çš„ç±»ä¹ŸåŒæ—¶å®ç°è¿™ä¸ªæ–°åŠ çš„æ–¹æ³•ã€‚

### ä¸ºä»€ä¹ˆå‡ºç°é»˜è®¤æ–¹æ³•

ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸ªç‰¹æ€§? é¦–å…ˆï¼Œä¹‹å‰çš„æ¥å£æ˜¯ä¸ªåŒåˆƒå‰‘ï¼Œå¥½å¤„æ˜¯é¢å‘æŠ½è±¡è€Œä¸æ˜¯é¢å‘å…·ä½“ç¼–ç¨‹ï¼Œç¼ºé™·æ˜¯ï¼Œå½“éœ€è¦ä¿®æ”¹æ¥å£æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹å…¨éƒ¨å®ç°è¯¥æ¥å£çš„ç±»ï¼Œç›®å‰çš„java 8ä¹‹å‰çš„é›†åˆæ¡†æ¶æ²¡æœ‰foreachæ–¹æ³•ï¼Œé€šå¸¸èƒ½æƒ³åˆ°çš„è§£å†³åŠæ³•æ˜¯åœ¨JDKé‡Œç»™ç›¸å…³çš„æ¥å£æ·»åŠ æ–°çš„æ–¹æ³•åŠå®ç°ã€‚ç„¶è€Œï¼Œå¯¹äºå·²ç»å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œæ˜¯æ²¡æ³•åœ¨ç»™æ¥å£æ·»åŠ æ–°æ–¹æ³•çš„åŒæ—¶ä¸å½±å“å·²æœ‰çš„å®ç°ã€‚æ‰€ä»¥å¼•è¿›çš„é»˜è®¤æ–¹æ³•ã€‚ä»–ä»¬çš„ç›®çš„æ˜¯**ä¸ºäº†è§£å†³æ¥å£çš„ä¿®æ”¹ä¸ç°æœ‰çš„å®ç°ä¸å…¼å®¹çš„é—®é¢˜**ã€‚

é»˜è®¤æ–¹æ³•ã€é™æ€æ–¹æ³•è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š

```java
publicÂ interfaceÂ VehicleÂ {Â 
Â 
Â //é»˜è®¤æ–¹æ³•Â 
Â Â Â defaultÂ voidÂ print(){Â 
Â Â Â Â Â Â System.out.println("æˆ‘æ˜¯ä¸€è¾†è½¦!");Â 
Â Â Â }Â 
Â Â Â Â //Â é™æ€æ–¹æ³•Â 
Â Â Â staticÂ voidÂ blowHorn(){Â 
Â Â Â Â Â Â System.out.println("æŒ‰å–‡å­!!!");Â 
Â Â Â }Â 
}Â 
```

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç æ¥äº†è§£å…³äºé»˜è®¤æ–¹æ³•çš„ä½¿ç”¨ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š

```java
publicÂ classÂ TesterÂ {Â 
Â Â Â publicÂ staticÂ voidÂ main(StringÂ args[]){Â 
Â Â Â Â Â Â VehicleÂ vehicleÂ =Â newÂ Car();Â 
Â Â Â Â Â Â vehicle.print();Â 
Â Â Â }Â 
}Â 
Â Â 
interfaceÂ VehicleÂ {Â 
Â Â Â defaultÂ voidÂ print(){Â 
Â Â Â Â Â Â System.out.println("æˆ‘æ˜¯ä¸€è¾†è½¦!");Â 
Â Â Â }Â 
Â Â Â Â Â 
Â Â Â staticÂ voidÂ blowHorn(){Â 
Â Â Â Â Â Â System.out.println("æŒ‰å–‡å­!!!");Â 
Â Â Â }Â 
}Â 
Â Â 
interfaceÂ FourWheelerÂ {Â 
Â Â Â defaultÂ voidÂ print(){Â 
Â Â Â Â Â Â System.out.println("æˆ‘æ˜¯ä¸€è¾†å››è½®è½¦!");Â 
Â Â Â }Â 
}Â 
Â Â 
classÂ CarÂ implementsÂ Vehicle,Â FourWheelerÂ {Â 
Â Â Â publicÂ voidÂ print(){Â 
Â Â Â Â Â Â Vehicle.super.print();Â 
Â Â Â Â Â Â FourWheeler.super.print();Â 
Â Â Â Â Â Â Vehicle.blowHorn();Â 
Â Â Â Â Â Â System.out.println("æˆ‘æ˜¯ä¸€è¾†æ±½è½¦!");Â 
Â Â Â }Â 
}Â 

// æ‰§è¡Œä»¥ä¸Šè„šæœ¬ï¼Œè¾“å‡ºç»“æœä¸ºï¼š
æˆ‘æ˜¯ä¸€è¾†è½¦!
æˆ‘æ˜¯ä¸€è¾†å››è½®è½¦!
æŒ‰å–‡å­!!!
æˆ‘æ˜¯ä¸€è¾†æ±½è½¦!
```

## java 8æŠ½è±¡ç±»ä¸æ¥å£å¯¹æ¯”

è¿™ä¸€ä¸ªåŠŸèƒ½ç‰¹æ€§å‡ºæ¥åï¼Œå¾ˆå¤šåŒå­¦éƒ½ååº”äº†ï¼Œjava 8çš„æ¥å£éƒ½æœ‰å®ç°æ–¹æ³•äº†ï¼Œè·ŸæŠ½è±¡ç±»è¿˜æœ‰ä»€ä¹ˆåŒºåˆ«? å…¶å®è¿˜æ˜¯æœ‰çš„ï¼Œè¯·çœ‹ä¸‹è¡¨å¯¹æ¯”ã€‚ã€‚

| ç›¸åŒç‚¹                                                       | ä¸åŒç‚¹                                                       |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| éƒ½æ˜¯æŠ½è±¡ç±»å‹                                                 | æŠ½è±¡ç±»ä¸å¯ä»¥å¤šé‡ç»§æ‰¿ï¼Œæ¥å£å¯ä»¥(æ— è®ºæ˜¯å¤šé‡ç±»å‹ç»§æ‰¿è¿˜æ˜¯å¤šé‡è¡Œä¸ºç»§æ‰¿) |
| éƒ½å¯ä»¥æœ‰å®ç°æ–¹æ³•(ä»¥å‰æ¥å£ä¸è¡Œ)                               | æŠ½è±¡ç±»å’Œæ¥å£æ‰€åæ˜ å‡ºçš„è®¾è®¡ç†å¿µä¸åŒã€‚å…¶å®æŠ½è±¡ç±»è¡¨ç¤ºçš„æ˜¯â€is-aâ€å…³ç³»ï¼Œæ¥å£è¡¨ç¤ºçš„æ˜¯â€like-aâ€å…³ç³» |
| éƒ½å¯ä»¥ä¸éœ€è¦å®ç°ç±»æˆ–è€…ç»§æ‰¿è€…å»å®ç°æ‰€æœ‰æ–¹æ³•ï¼Œ(ä»¥å‰ä¸è¡Œï¼Œç°åœ¨æ¥å£ä¸­é»˜è®¤æ–¹æ³•ä¸éœ€è¦å®ç°è€…å®ç°) | æ¥å£ä¸­å®šä¹‰çš„å˜é‡é»˜è®¤æ˜¯public static final å‹ï¼Œä¸”å¿…é¡»ç»™å…¶åˆå€¼ï¼Œæ‰€ä»¥å®ç°ç±»ä¸­ä¸èƒ½æ”¹å˜å…¶å€¼ï¼›æŠ½è±¡ç±»ä¸­çš„å˜é‡é»˜è®¤æ˜¯ friendly å‹ï¼Œå…¶å€¼å¯ä»¥åœ¨å­ç±»ä¸­é‡æ–°å®šä¹‰ï¼Œä¹Ÿå¯ä»¥é‡æ–°èµ‹å€¼ã€‚ |

## å¤šé‡ç»§æ‰¿çš„å†²çª

ç”±äºåŒä¸€ä¸ªæ–¹æ³•å¯ä»¥ä»ä¸åŒæ¥å£å¼•å…¥ï¼Œè‡ªç„¶è€Œç„¶çš„ä¼šæœ‰å†²çªçš„ç°è±¡ï¼Œé»˜è®¤æ–¹æ³•åˆ¤æ–­å†²çªçš„è§„åˆ™å¦‚ä¸‹:

1.ä¸€ä¸ªå£°æ˜åœ¨ç±»é‡Œé¢çš„æ–¹æ³•ä¼˜å…ˆäºä»»ä½•é»˜è®¤æ–¹æ³•(classes always win)

2.å¦åˆ™ï¼Œåˆ™ä¼šä¼˜å…ˆé€‰å–è·¯å¾„æœ€çŸ­çš„ã€‚

### ä¸¾ä¾‹å­

- Case 1

```java
public interface A{
	default void aa() {
		System.out.println("A's aa");
	}
}
public interface B{
	default void aa() {
		System.out.println("B's aa");
	}
}
public static class D implements A,B{
	
}
```

æŠ¥é”™ Duplicate default methods named aa with the parameters () and () are inherited from the types DocApplication.B and DocApplication.A

å¦‚æœä¸€å®šè¦è¿™ä¹ˆå†™å‘¢ï¼ŒåŒæ—¶å®ç°A,Bå¹¶ä¸”ä½¿ç”¨Aä¸­aa? å¯ä»¥è¿™ä¹ˆå†™:

```java
public static class D implements A,B{
    @Override
    public void aa(){
        A.super.aa();
    }
}  
```

- Case 2

```java
public interface A{
	default void aa() {
		System.out.println("A's aa");
	}
}
public interface B{
	default void aa() {
		System.out.println("B's aa");
	}
}
public interface C extends A, B{
	default void aa() {
		System.out.println("C's aa");
	}
}
public static class D implements A,B,C{
	
}
```

è¾“å‡º C's aa

- Case 3

```java
public interface A{
	default void aa() {
		System.out.println("A's aa");
	}
}
public interface C extends A{
	default void aa() {
		System.out.println("C's aa");
	}
}
public static class D implements C{
	
}   
```

è¾“å‡º C's aa

> é€šè¿‡Case1-3å¯ä»¥çŸ¥é“å®ƒæ˜¯æ‰¾å”¯ä¸€çš„æœ€çŸ­è·¯å¾„çš„defaultï¼Œå¦‚æœæ˜¯å¤šä¸ªé‚£ä¹ˆæŠ¥é”™ã€‚

- Case 4 å¦‚æœæƒ³è°ƒç”¨Açš„é»˜è®¤å‡½æ•°ï¼Œåˆ™ç”¨åˆ°æ–°è¯­æ³•X.super.m(â€¦),ä¸‹é¢ä¿®æ”¹Cç±»ï¼Œå®ç°Aæ¥å£ï¼Œé‡å†™ä¸€ä¸ªhelloæ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```java
public interface A{
	default void aa() {
		System.out.println("A's aa");
	}
}
public class X implements A{
    @Override
    public void aa(){
        A.super.aa();
    }
}
```

è¾“å‡º: A's aa

- Case 5

```java
public interface A{
	default void aa() {
		System.out.println("A's aa");
	}
}
public interface B{
	default void aa() {
		System.out.println("B's aa");
	}
}
public interface C extends A,B{
	default void aa() {
		System.out.println("C's aa");
	}
}
public static class D implements C{
	@Override
    public void aa(){
        C.super.aa();
    }
} 
```

è¾“å‡º C's aa å¯è§C.superè¡¨ç¤ºçš„æ˜¯Cæ¥å£ï¼ŒåŒæ—¶Dæ— æ³•è®¿é—®A,Bçš„aa

> é€šè¿‡Case 5ä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒCè™½ç„¶æœ‰åŒä¸€ä¸ªä¸¤ä¸ªæœ€çŸ­è·¯å¾„çš„aa, ä½†æ˜¯å®ƒè‡ªå·±æœ‰ä¸€ä¸ªæ›´é«˜ä¼˜å…ˆçº§çš„aaï¼Œæ‰€ä»¥ä¸ä¼šæŠ¥é”™; case 6 ä¼šæŠ¥é”™

- Case 6

```java
public interface A{
	default void aa() {
		System.out.println("A's aa");
	}
}
public interface B{
	default void aa() {
		System.out.println("B's aa");
	}
}
public interface C extends A,B{
}
```

æŠ¥é”™

## æ€»ç»“

é»˜è®¤æ–¹æ³•ç»™äºˆæˆ‘ä»¬ä¿®æ”¹æ¥å£è€Œä¸ç ´ååŸæ¥çš„å®ç°ç±»çš„ç»“æ„æä¾›äº†ä¾¿åˆ©ï¼Œç›®å‰java 8çš„é›†åˆæ¡†æ¶å·²ç»å¤§é‡ä½¿ç”¨äº†é»˜è®¤æ–¹æ³•æ¥æ”¹è¿›äº†ï¼Œå½“æˆ‘ä»¬æœ€ç»ˆå¼€å§‹ä½¿ç”¨Java 8çš„lambdasè¡¨è¾¾å¼æ—¶ï¼Œæä¾›ç»™æˆ‘ä»¬ä¸€ä¸ªå¹³æ»‘çš„è¿‡æ¸¡ä½“éªŒã€‚ä¹Ÿè®¸å°†æ¥æˆ‘ä»¬ä¼šåœ¨APIè®¾è®¡ä¸­çœ‹åˆ°æ›´å¤šçš„é»˜è®¤æ–¹æ³•çš„åº”ç”¨ã€‚



## å‚è€ƒèµ„æ–™

- [Java8 æ–°ç‰¹æ€§å…¨é¢ä»‹ç»ï¼Œå¼ºçƒˆå»ºè®®æ”¶è—](https://www.51cto.com/article/647804.html)
- [Java å…¨æ ˆçŸ¥è¯†ä½“ç³»](https://www.pdai.tech/md/java/java8/java8-default.html)