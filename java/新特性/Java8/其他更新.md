# ğŸ¹ Java8 æ–°ç‰¹æ€§ - å…¶ä»–æ›´æ–°

---

## å¤„ç†æ•°å€¼

Java8æ·»åŠ äº†å¯¹æ— ç¬¦å·æ•°çš„é¢å¤–æ”¯æŒã€‚Javaä¸­çš„æ•°å€¼æ€»æ˜¯æœ‰ç¬¦å·çš„ï¼Œä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬æ¥è§‚å¯ŸInteger:

intå¯è¡¨ç¤ºæœ€å¤š2 ** 32ä¸ªæ•°ã€‚Javaä¸­çš„æ•°å€¼é»˜è®¤ä¸ºæœ‰ç¬¦å·çš„ï¼Œæ‰€ä»¥æœ€åä¸€ä¸ªäºŒè¿›åˆ¶æ•°å­—è¡¨ç¤ºç¬¦å·(0ä¸ºæ­£æ•°ï¼Œ1ä¸ºè´Ÿæ•°)ã€‚æ‰€ä»¥ä»åè¿›åˆ¶çš„0å¼€å§‹ï¼Œæœ€å¤§çš„æœ‰ç¬¦å·æ­£æ•´æ•°ä¸º2 ** 31 - 1ã€‚

ä½ å¯ä»¥é€šè¿‡Integer.MAX_VALUEæ¥è®¿é—®å®ƒ:

```java
System.out.println(Integer.MAX_VALUE);      // 2147483647
System.out.println(Integer.MAX_VALUE + 1);  // -2147483648
```

Java8æ·»åŠ äº†è§£ææ— ç¬¦å·æ•´æ•°çš„æ”¯æŒï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å®ƒå¦‚ä½•å·¥ä½œ:

```java
long maxUnsignedInt = (1l << 32) - 1;
String string = String.valueOf(maxUnsignedInt);
int unsignedInt = Integer.parseUnsignedInt(string, 10);
String string2 = Integer.toUnsignedString(unsignedInt, 10);
```

å°±åƒä½ çœ‹åˆ°çš„é‚£æ ·ï¼Œç°åœ¨å¯ä»¥å°†æœ€å¤§çš„æ— ç¬¦å·æ•°2 ** 32 - 1è§£æä¸ºæ•´æ•°ã€‚è€Œä¸”ä½ ä¹Ÿå¯ä»¥å°†è¿™ä¸ªæ•°å€¼è½¬æ¢å›æ— ç¬¦å·æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚

è¿™åœ¨ä¹‹å‰ä¸å¯èƒ½ä½¿ç”¨parseIntå®Œæˆï¼Œå°±åƒè¿™ä¸ªä¾‹å­å±•ç¤ºçš„é‚£æ ·:

```java
try {
    Integer.parseInt(string, 10);
}
catch (NumberFormatException e) {
    System.err.println("could not parse signed int of " + maxUnsignedInt);
}
```

è¿™ä¸ªæ•°å€¼ä¸å¯è§£æä¸ºæœ‰ç¬¦å·æ•´æ•°ï¼Œå› ä¸ºå®ƒè¶…å‡ºäº†æœ€å¤§èŒƒå›´2 ** 31 - 1ã€‚ ç®—æœ¯è¿ç®—

Mathå·¥å…·ç±»æ–°å¢äº†ä¸€äº›æ–¹æ³•æ¥å¤„ç†æ•°å€¼æº¢å‡ºã€‚è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢? æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†æ‰€æœ‰æ•°å€¼ç±»å‹éƒ½æœ‰æœ€å¤§å€¼ã€‚æ‰€ä»¥å½“ç®—æœ¯è¿ç®—çš„ç»“æœä¸èƒ½è¢«å®ƒçš„å¤§å°è£…ä¸‹æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢?

```java
System.out.println(Integer.MAX_VALUE);      // 2147483647
System.out.println(Integer.MAX_VALUE + 1);  // -2147483648
```

å°±åƒä½ çœ‹åˆ°çš„é‚£æ ·ï¼Œå‘ç”Ÿäº†æ•´æ•°æº¢å‡ºï¼Œè¿™é€šå¸¸æ˜¯æˆ‘ä»¬ä¸æ„¿æ„çœ‹åˆ°çš„ã€‚

Java8æ·»åŠ äº†ä¸¥æ ¼æ•°å­¦è¿ç®—çš„æ”¯æŒæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚Mathæ‰©å±•äº†ä¸€äº›æ–¹æ³•ï¼Œå®ƒä»¬å…¨éƒ¨ä»¥exactç»“å°¾ï¼Œä¾‹å¦‚addExactã€‚å½“è¿ç®—ç»“æœä¸èƒ½è¢«æ•°å€¼ç±»å‹è£…ä¸‹æ—¶ï¼Œè¿™äº›æ–¹æ³•é€šè¿‡æŠ›å‡ºArithmeticExceptionå¼‚å¸¸æ¥åˆç†åœ°å¤„ç†æº¢å‡ºã€‚

```java
try {
    Math.addExact(Integer.MAX_VALUE, 1);
}
catch (ArithmeticException e) {
    System.err.println(e.getMessage());
    // => integer overflow
}
```

å½“å°è¯•é€šè¿‡toIntExactå°†é•¿æ•´æ•°è½¬æ¢ä¸ºæ•´æ•°æ—¶ï¼Œå¯èƒ½ä¼šæŠ›å‡ºåŒæ ·çš„å¼‚å¸¸:

```java
try {
    Math.toIntExact(Long.MAX_VALUE);
}
catch (ArithmeticException e) {
    System.err.println(e.getMessage());
    // => integer overflow
}
```

## å¤„ç†æ–‡ä»¶

Fileså·¥å…·ç±»é¦–æ¬¡åœ¨Java7ä¸­å¼•å…¥ï¼Œä½œä¸ºNIOçš„ä¸€éƒ¨åˆ†ã€‚JDK8 APIæ·»åŠ äº†ä¸€äº›é¢å¤–çš„æ–¹æ³•ï¼Œå®ƒä»¬å¯ä»¥å°†æ–‡ä»¶ç”¨äºå‡½æ•°å¼æ•°æ®æµã€‚è®©æˆ‘ä»¬æ·±å…¥æ¢ç´¢ä¸€äº›ä»£ç ç¤ºä¾‹ã€‚ åˆ—å‡ºæ–‡ä»¶

Files.listæ–¹æ³•å°†æŒ‡å®šç›®å½•çš„æ‰€æœ‰è·¯å¾„è½¬æ¢ä¸ºæ•°æ®æµï¼Œä¾¿äºæˆ‘ä»¬åœ¨æ–‡ä»¶ç³»ç»Ÿçš„å†…å®¹ä¸Šä½¿ç”¨ç±»ä¼¼filterå’Œsortedçš„æµæ“ä½œã€‚

```java
try (Stream<Path> stream = Files.list(Paths.get(""))) {
    String joined = stream
        .map(String::valueOf)
        .filter(path -> !path.startsWith("."))
        .sorted()
        .collect(Collectors.joining("; "));
    System.out.println("List: " + joined);
}
```

ä¸Šé¢çš„ä¾‹å­åˆ—å‡ºäº†å½“å‰å·¥ä½œç›®å½•çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¹‹åå°†æ¯ä¸ªè·¯å¾„éƒ½æ˜ å°„ä¸ºå®ƒçš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ä¹‹åç»“æœè¢«è¿‡æ»¤ã€æ’åºï¼Œæœ€åè¿æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœä½ è¿˜ä¸ç†Ÿæ‚‰å‡½æ•°å¼æ•°æ®æµï¼Œä½ åº”è¯¥é˜…è¯»æˆ‘çš„Java8æ•°æ®æµæ•™ç¨‹ã€‚

ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæ•°æ®æµçš„åˆ›å»ºåŒ…è£…åœ¨try-withè¯­å¥ä¸­ã€‚æ•°æ®æµå®ç°äº†AutoCloseableï¼Œå¹¶ä¸”è¿™é‡Œæˆ‘ä»¬éœ€è¦æ˜¾å¼å…³é—­æ•°æ®æµï¼Œå› ä¸ºå®ƒåŸºäºIOæ“ä½œã€‚

> è¿”å›çš„æ•°æ®æµæ˜¯DirectoryStreamçš„å°è£…ã€‚å¦‚æœéœ€è¦åŠæ—¶å¤„ç†æ–‡ä»¶èµ„æºï¼Œå°±åº”è¯¥ä½¿ç”¨try-withç»“æ„æ¥ç¡®ä¿åœ¨æµå¼æ“ä½œå®Œæˆåï¼Œæ•°æ®æµçš„closeæ–¹æ³•è¢«è°ƒç”¨ã€‚

## æŸ¥æ‰¾æ–‡ä»¶

ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•æŸ¥æ‰¾åœ¨ç›®å½•åŠå…¶å­ç›®å½•ä¸‹çš„æ–‡ä»¶:

```java
Path start = Paths.get("");
int maxDepth = 5;
try (Stream<Path> stream = Files.find(start, maxDepth, (path, attr) ->
        String.valueOf(path).endsWith(".js"))) {
    String joined = stream
        .sorted()
        .map(String::valueOf)
        .collect(Collectors.joining("; "));
    System.out.println("Found: " + joined);
}
```

findæ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°: ç›®å½•è·¯å¾„startæ˜¯èµ·å§‹ç‚¹ï¼ŒmaxDepthå®šä¹‰äº†æœ€å¤§æœç´¢æ·±åº¦ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªåŒ¹é…è°“è¯ï¼Œå®šä¹‰äº†æœç´¢çš„é€»è¾‘ã€‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœç´¢äº†æ‰€æœ‰JavaScirptæ–‡ä»¶(ä»¥.jsç»“å°¾çš„æ–‡ä»¶å)ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Files.walkæ–¹æ³•æ¥å®Œæˆç›¸åŒçš„è¡Œä¸ºã€‚è¿™ä¸ªæ–¹æ³•ä¼šéå†æ¯ä¸ªæ–‡ä»¶ï¼Œè€Œä¸éœ€è¦ä¼ é€’æœç´¢è°“è¯ã€‚

```java
Path start = Paths.get("");
int maxDepth = 5;
try (Stream<Path> stream = Files.walk(start, maxDepth)) {
    String joined = stream
        .map(String::valueOf)
        .filter(path -> path.endsWith(".js"))
        .sorted()
        .collect(Collectors.joining("; "));
    System.out.println("walk(): " + joined);
}
```

è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æµå¼æ“ä½œfilteræ¥å®Œæˆå’Œä¸Šä¸ªä¾‹å­ç›¸åŒçš„è¡Œä¸ºã€‚

## è¯»å†™æ–‡ä»¶

å°†æ–‡æœ¬æ–‡ä»¶è¯»åˆ°å†…å­˜ï¼Œä»¥åŠå‘æ–‡æœ¬æ–‡ä»¶å†™å…¥å­—ç¬¦ä¸²åœ¨Java 8 ä¸­æ˜¯ç®€å•çš„ä»»åŠ¡ã€‚ä¸éœ€è¦å†å»æ‘†å¼„è¯»å†™å™¨äº†ã€‚Files.readAllLinesä»æŒ‡å®šçš„æ–‡ä»¶æŠŠæ‰€æœ‰è¡Œè¯»è¿›å­—ç¬¦ä¸²åˆ—è¡¨ä¸­ã€‚ä½ å¯ä»¥ç®€å•åœ°ä¿®æ”¹è¿™ä¸ªåˆ—è¡¨ï¼Œå¹¶ä¸”å°†å®ƒé€šè¿‡Files.writeå†™åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­:

```java
List<String> lines = Files.readAllLines(Paths.get("res/nashorn1.js"));
lines.add("print('foobar');");
Files.write(Paths.get("res/nashorn1-modified.js"), lines);
```

è¦æ³¨æ„è¿™äº›æ–¹æ³•å¯¹å†…å­˜å¹¶ä¸ååˆ†é«˜æ•ˆï¼Œå› ä¸ºæ•´ä¸ªæ–‡ä»¶éƒ½ä¼šè¯»è¿›å†…å­˜ã€‚æ–‡ä»¶è¶Šå¤§ï¼Œæ‰€ç”¨çš„å †åŒºä¹Ÿå°±è¶Šå¤§ã€‚

ä½ å¯ä»¥ä½¿ç”¨Files.linesæ–¹æ³•æ¥ä½œä¸ºå†…å­˜é«˜æ•ˆçš„æ›¿ä»£ã€‚è¿™ä¸ªæ–¹æ³•è¯»å–æ¯ä¸€è¡Œï¼Œå¹¶ä½¿ç”¨å‡½æ•°å¼æ•°æ®æµæ¥å¯¹å…¶æµå¼å¤„ç†ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰è¡Œéƒ½è¯»è¿›å†…å­˜ã€‚

```java
try (Stream<String> stream = Files.lines(Paths.get("res/nashorn1.js"))) {
    stream
        .filter(line -> line.contains("print"))
        .map(String::trim)
        .forEach(System.out::println);
}
```

å¦‚æœä½ éœ€è¦æ›´å¤šçš„ç²¾ç»†æ§åˆ¶ï¼Œä½ éœ€è¦æ„é€ ä¸€ä¸ªæ–°çš„BufferedReaderæ¥ä»£æ›¿:

```java
Path path = Paths.get("res/nashorn1.js");
try (BufferedReader reader = Files.newBufferedReader(path)) {
    System.out.println(reader.readLine());
} 
```

æˆ–è€…ï¼Œä½ éœ€è¦å†™å…¥æ–‡ä»¶æ—¶ï¼Œç®€å•åœ°æ„é€ ä¸€ä¸ªBufferedWriteræ¥ä»£æ›¿:

```java
Path path = Paths.get("res/output.js");
try (BufferedWriter writer = Files.newBufferedWriter(path)) {
    writer.write("print('Hello World');");
} 
```

BufferedReaderä¹Ÿå¯ä»¥è®¿é—®å‡½æ•°å¼æ•°æ®æµã€‚linesæ–¹æ³•åœ¨å®ƒæ‰€æœ‰è¡Œä¸Šé¢æ„å»ºæ•°æ®æµ:

```java
Path path = Paths.get("res/nashorn1.js");
try (BufferedReader reader = Files.newBufferedReader(path)) {
    long countPrints = reader
        .lines()
        .filter(line -> line.contains("print"))
        .count();
    System.out.println(countPrints);
}
```

ç›®å‰ä¸ºæ­¢ä½ å¯ä»¥çœ‹åˆ°Java8æä¾›äº†ä¸‰ä¸ªç®€å•çš„æ–¹æ³•æ¥è¯»å–æ–‡æœ¬æ–‡ä»¶çš„æ¯ä¸€è¡Œï¼Œä½¿æ–‡ä»¶å¤„ç†æ›´åŠ ä¾¿æ·ã€‚

ä¸å¹¸çš„æ˜¯ä½ éœ€è¦æ˜¾å¼ä½¿ç”¨try-withè¯­å¥æ¥å…³é—­æ–‡ä»¶æµï¼Œè¿™ä¼šä½¿ç¤ºä¾‹ä»£ç æœ‰äº›å‡Œä¹±ã€‚æˆ‘æœŸå¾…å‡½æ•°å¼æ•°æ®æµå¯ä»¥åœ¨è°ƒç”¨ç±»ä¼¼countå’Œcollectæ—¶å¯ä»¥è‡ªåŠ¨å…³é—­ï¼Œå› ä¸ºä½ ä¸èƒ½åœ¨ç›¸åŒæ•°æ®æµä¸Šè°ƒç”¨ç»ˆæ­¢æ“ä½œä¸¤æ¬¡ã€‚

## java.util.Random

åœ¨Java8ä¸­java.util.Randomç±»çš„ä¸€ä¸ªéå¸¸æ˜æ˜¾çš„å˜åŒ–å°±æ˜¯æ–°å¢äº†è¿”å›éšæœºæ•°æµ(random Stream of numbers)çš„ä¸€äº›æ–¹æ³•ã€‚

ä¸‹é¢çš„ä»£ç æ˜¯åˆ›å»ºä¸€ä¸ªæ— ç©·å°½çš„doubleç±»å‹çš„æ•°å­—æµï¼Œè¿™äº›æ•°å­—åœ¨0(åŒ…æ‹¬0)å’Œ1(ä¸åŒ…å«1)ä¹‹é—´ã€‚

```java
Random random = new Random();
DoubleStream doubleStream = random.doubles();
```

ä¸‹é¢çš„ä»£ç æ˜¯åˆ›å»ºä¸€ä¸ªæ— ç©·å°½çš„intç±»å‹çš„æ•°å­—æµï¼Œè¿™äº›æ•°å­—åœ¨0(åŒ…æ‹¬0)å’Œ100(ä¸åŒ…æ‹¬100)ä¹‹é—´ã€‚

```java
Random random = new Random();
IntStream intStream = random.ints(0, 100);
```

é‚£ä¹ˆè¿™äº›æ— ç©·å°½çš„æ•°å­—æµç”¨æ¥åšä»€ä¹ˆå‘¢? æ¥ä¸‹æ¥ï¼Œæˆ‘é€šè¿‡ä¸€äº›æ¡ˆä¾‹æ¥åˆ†æã€‚è®°ä½ï¼Œè¿™äº›æ— ç©·å¤§çš„æ•°å­—æµåªèƒ½é€šè¿‡æŸç§æ–¹å¼è¢«æˆªæ–­(limited)ã€‚

ç¤ºä¾‹1: åˆ›å»º10ä¸ªéšæœºçš„æ•´æ•°æµå¹¶æ‰“å°å‡ºæ¥:

```java
intStream.limit(10).forEach(System.out::println); 
```

ç¤ºä¾‹2: åˆ›å»º100ä¸ªéšæœºæ•´æ•°:

```java
    List<Integer> randomBetween0And99 = intStream
                                       .limit(100)
                                       .boxed()
                                       .collect(Collectors.toList());
```

å¯¹äºé«˜æ–¯ä¼ªéšæœºæ•°(gaussian pseudo-random values)æ¥è¯´ï¼Œrandom.doubles()æ–¹æ³•æ‰€åˆ›å»ºçš„æµä¸èƒ½ç­‰ä»·äºé«˜æ–¯ä¼ªéšæœºæ•°ï¼Œç„¶è€Œï¼Œå¦‚æœç”¨java8æ‰€æä¾›çš„åŠŸèƒ½æ˜¯éå¸¸å®¹æ˜“å®ç°çš„ã€‚

```java
Random random = new Random();
DoubleStream gaussianStream = Stream.generate(random::nextGaussian).mapToDouble(e -> e);
```

è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨äº†Stream.generate apiï¼Œå¹¶ä¼ å…¥Supplier ç±»çš„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯é€šè¿‡è°ƒç”¨Randomç±»ä¸­çš„æ–¹æ³• nextGaussian()åˆ›å»ºå¦ä¸€ä¸ªé«˜æ–¯ä¼ªéšæœºæ•°ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥å¯¹doubleç±»å‹çš„ä¼ªéšæœºæ•°æµå’Œdoubleç±»å‹çš„é«˜æ–¯ä¼ªéšæœºæ•°æµåšä¸€ä¸ªæ›´åŠ æœ‰æ„æ€çš„äº‹æƒ…ï¼Œé‚£å°±æ˜¯è·å¾—ä¸¤ä¸ªæµçš„éšæœºæ•°çš„åˆ†é…æƒ…å†µã€‚é¢„æœŸçš„ç»“æœæ˜¯: doubleç±»å‹çš„ä¼ªéšæœºæ•°æ˜¯å‡åŒ€çš„åˆ†é…çš„ï¼Œè€Œdoubleç±»å‹çš„é«˜æ–¯ä¼ªéšæœºæ•°åº”è¯¥æ˜¯æ­£æ€åˆ†å¸ƒçš„ã€‚

é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ç”Ÿæˆäº†ä¸€ç™¾ä¸‡ä¸ªä¼ªéšæœºæ•°ï¼Œè¿™æ˜¯é€šè¿‡java8æä¾›çš„apiå®ç°çš„:

```java
Random random = new Random();
DoubleStream doubleStream = random.doubles(-1.0, 1.0);
LinkedHashMap<Range, Integer> rangeCountMap = doubleStream.limit(1000000)
    .boxed()
    .map(Ranges::of)
    .collect(Ranges::emptyRangeCountMap, (m, e) -> m.put(e, m.get(e) + 1), Ranges::mergeRangeCountMaps);

rangeCountMap.forEach((k, v) -> System.out.println(k.from() + "\t" + v));
```

ä»£ç çš„è¿è¡Œç»“æœå¦‚ä¸‹:

```bash
    -1      49730
    -0.9    49931
    -0.8    50057
    -0.7    50060
    -0.6    49963
    -0.5    50159
    -0.4    49921
    -0.3    49962
    -0.2    50231
    -0.1    49658
    0       50177
    0.1     49861
    0.2     49947
    0.3     50157
    0.4     50414
    0.5     50006
    0.6     50038
    0.7     49962
    0.8     50071
    0.9     49695 
```

ä¸ºäº†ç±»æ¯”ï¼Œæˆ‘ä»¬å†ç”Ÿæˆä¸€ç™¾ä¸‡ä¸ªé«˜æ–¯ä¼ªéšæœºæ•°:

```java
Random random = new Random();
DoubleStream gaussianStream = Stream.generate(random::nextGaussian).mapToDouble(e -> e);
LinkedHashMap<Range, Integer> gaussianRangeCountMap =
    gaussianStream
            .filter(e -> (e >= -1.0 && e < 1.0))
            .limit(1000000)
            .boxed()
            .map(Ranges::of)
            .collect(Ranges::emptyRangeCountMap, (m, e) -> m.put(e, m.get(e) + 1), Ranges::mergeRangeCountMaps);

gaussianRangeCountMap.forEach((k, v) -> System.out.println(k.from() + "\t" + v));
```

ä¸Šé¢ä»£ç è¾“å‡ºçš„ç»“æœæ°æ°ä¸æˆ‘ä»¬é¢„æœŸç»“æœç›¸å»åˆï¼Œå³: doubleç±»å‹çš„ä¼ªéšæœºæ•°æ˜¯å‡åŒ€çš„åˆ†é…çš„ï¼Œè€Œdoubleç±»å‹çš„é«˜æ–¯ä¼ªéšæœºæ•°åº”è¯¥æ˜¯æ­£æ€åˆ†å¸ƒçš„ã€‚

é™„: å®Œæ•´ä»£ç å¯ç‚¹å‡»è¿™é‡Œè·å– https://gist.github.com/bijukunjummen/8129250

è¯‘æ–‡é“¾æ¥:  http://www.importnew.com/9672.html

## java.util.Base64

> Java8ä¸­java.util.Base64æ€§èƒ½æ¯”è¾ƒé«˜ï¼Œæ¨èä½¿ç”¨ã€‚è¯·å‚è€ƒ:

- æ€§èƒ½å¯¹æ¯”:  https://wizardforcel.gitbooks.io/java8-new-features/content/11.html
- æºä»£ç : http://git.oschina.net/benhail/javase8-sample

è¯¥ç±»æä¾›äº†ä¸€å¥—é™æ€æ–¹æ³•è·å–ä¸‹é¢ä¸‰ç§BASE64ç¼–è§£ç å™¨:

1)Basicç¼–ç : æ˜¯æ ‡å‡†çš„BASE64ç¼–ç ï¼Œç”¨äºå¤„ç†å¸¸è§„çš„éœ€æ±‚

```java
// ç¼–ç 
String asB64 = Base64.getEncoder().encodeToString("some string".getBytes("utf-8"));
System.out.println(asB64); // è¾“å‡ºä¸º: c29tZSBzdHJpbmc=
// è§£ç 
byte[] asBytes = Base64.getDecoder().decode("c29tZSBzdHJpbmc=");
System.out.println(new String(asBytes, "utf-8")); // è¾“å‡ºä¸º: some string
```

2)URLç¼–ç : ä½¿ç”¨ä¸‹åˆ’çº¿æ›¿æ¢URLé‡Œé¢çš„åæ–œçº¿â€œ/â€

```java
String urlEncoded = Base64.getUrlEncoder().encodeToString("subjects?abcd".getBytes("utf-8"));
System.out.println("Using URL Alphabet: " + urlEncoded);
// è¾“å‡ºä¸º:
Using URL Alphabet: c3ViamVjdHM_YWJjZA==
```

3)MIMEç¼–ç : ä½¿ç”¨åŸºæœ¬çš„å­—æ¯æ•°å­—äº§ç”ŸBASE64è¾“å‡ºï¼Œè€Œä¸”å¯¹MIMEæ ¼å¼å‹å¥½: æ¯ä¸€è¡Œè¾“å‡ºä¸è¶…è¿‡76ä¸ªå­—ç¬¦ï¼Œè€Œä¸”æ¯è¡Œä»¥â€œ\r\nâ€ç¬¦ç»“æŸã€‚

```java
StringBuilder sb = new StringBuilder();
for (int t = 0; t < 10; ++t) {
  sb.append(UUID.randomUUID().toString());
}
byte[] toEncode = sb.toString().getBytes("utf-8");
String mimeEncoded = Base64.getMimeEncoder().encodeToString(toEncode);
System.out.println(mimeEncoded);
```



## å‚è€ƒèµ„æ–™

- [Java å…¨æ ˆçŸ¥è¯†ä½“ç³»](https://www.pdai.tech/md/java/java8/java8-others.html)

