**<span style="font-size: 35px;">ğŸ¤ Javaå¹¶å‘ ç»“æ„è¯´æ˜</span>**

---

## Overview

æ­£å¼å­¦ä¹ æ—¶å…ˆäº†è§£äº”ä¸ªéƒ¨åˆ†ï¼š

![image](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-09-10/6b12542a-5120-4feb-8280-e062b5a525de_java-thread-x-juc-overview-1-u.png)

ä¸»è¦åŒ…å«: (æ³¨æ„: ä¸Šå›¾æ˜¯ç½‘ä¸Šæ‰¾çš„å›¾ï¼Œæ— æ³•è¡¨è¿°ä¸€äº›ç»§æ‰¿å…³ç³»ï¼ŒåŒæ—¶å°‘äº†éƒ¨åˆ†ç±»ï¼›ä½†æ˜¯ä¸»ä½“ä¸Šå¯ä»¥çœ‹å‡ºå…¶åˆ†ç±»å…³ç³»ä¹Ÿå¤Ÿäº†)

- Lockæ¡†æ¶å’ŒToolsç±»(æŠŠå›¾ä¸­è¿™ä¸¤ä¸ªæ”¾åˆ°ä¸€èµ·ç†è§£)
- Collections: å¹¶å‘é›†åˆ
- Atomic: åŸå­ç±»
- Executors: çº¿ç¨‹æ± 

## Lockæ¡†æ¶å’ŒToolsç±»

### ç±»ç»“æ„æ€»è§ˆ

![image](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-09-10/20cd1264-8a6e-4cd6-8e8d-a878a0ed3bae_java-thread-x-juc-overview-lock.png)

### æ¥å£: Condition

> Conditionä¸ºæ¥å£ç±»å‹ï¼Œå®ƒå°† Object ç›‘è§†å™¨æ–¹æ³•(waitã€notify å’Œ notifyAll)åˆ†è§£æˆæˆªç„¶ä¸åŒçš„å¯¹è±¡ï¼Œä»¥ä¾¿é€šè¿‡å°†è¿™äº›å¯¹è±¡ä¸ä»»æ„ Lock å®ç°ç»„åˆä½¿ç”¨ï¼Œä¸ºæ¯ä¸ªå¯¹è±¡æä¾›å¤šä¸ªç­‰å¾… set (wait-set)ã€‚å…¶ä¸­ï¼ŒLock æ›¿ä»£äº† synchronized æ–¹æ³•å’Œè¯­å¥çš„ä½¿ç”¨ï¼ŒCondition æ›¿ä»£äº† Object ç›‘è§†å™¨æ–¹æ³•çš„ä½¿ç”¨ã€‚å¯ä»¥é€šè¿‡await(),signal()æ¥ä¼‘çœ /å”¤é†’çº¿ç¨‹ã€‚

åœ¨[JUCé”: AbstractQueuedSynchonizerè¯¦è§£]()ä¸­ç±»çš„**å†…éƒ¨ç±»-conditionobjectç±»**æœ‰å…·ä½“åˆ†æã€‚

### æ¥å£: Lock

> Lockä¸ºæ¥å£ç±»å‹ï¼ŒLockå®ç°æä¾›äº†æ¯”ä½¿ç”¨synchronizedæ–¹æ³•å’Œè¯­å¥å¯è·å¾—çš„æ›´å¹¿æ³›çš„é”å®šæ“ä½œã€‚æ­¤å®ç°å…è®¸æ›´çµæ´»çš„ç»“æ„ï¼Œå¯ä»¥å…·æœ‰å·®åˆ«å¾ˆå¤§çš„å±æ€§ï¼Œå¯ä»¥æ”¯æŒå¤šä¸ªç›¸å…³çš„Conditionå¯¹è±¡ã€‚

### æ¥å£: ReadWriteLock

> ReadWriteLockä¸ºæ¥å£ç±»å‹ï¼Œ ç»´æŠ¤äº†ä¸€å¯¹ç›¸å…³çš„é”ï¼Œä¸€ä¸ªç”¨äºåªè¯»æ“ä½œï¼Œå¦ä¸€ä¸ªç”¨äºå†™å…¥æ“ä½œã€‚åªè¦æ²¡æœ‰ writerï¼Œè¯»å–é”å¯ä»¥ç”±å¤šä¸ª reader çº¿ç¨‹åŒæ—¶ä¿æŒã€‚å†™å…¥é”æ˜¯ç‹¬å çš„ã€‚

### æŠ½è±¡ç±»: AbstractOwnableSynchonizer

> AbstractOwnableSynchonizerä¸ºæŠ½è±¡ç±»ï¼Œå¯ä»¥ç”±çº¿ç¨‹ä»¥ç‹¬å æ–¹å¼æ‹¥æœ‰çš„åŒæ­¥å™¨ã€‚æ­¤ç±»ä¸ºåˆ›å»ºé”å’Œç›¸å…³åŒæ­¥å™¨(ä¼´éšç€æ‰€æœ‰æƒçš„æ¦‚å¿µ)æä¾›äº†åŸºç¡€ã€‚AbstractOwnableSynchronizer ç±»æœ¬èº«ä¸ç®¡ç†æˆ–ä½¿ç”¨æ­¤ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œå­ç±»å’Œå·¥å…·å¯ä»¥ä½¿ç”¨é€‚å½“ç»´æŠ¤çš„å€¼å¸®åŠ©æ§åˆ¶å’Œç›‘è§†è®¿é—®ä»¥åŠæä¾›è¯Šæ–­ã€‚

### æŠ½è±¡ç±»(long): AbstractQueuedLongSynchronizer

> AbstractQueuedLongSynchronizerä¸ºæŠ½è±¡ç±»ï¼Œä»¥ long å½¢å¼ç»´æŠ¤åŒæ­¥çŠ¶æ€çš„ä¸€ä¸ª AbstractQueuedSynchronizer ç‰ˆæœ¬ã€‚æ­¤ç±»å…·æœ‰çš„ç»“æ„ã€å±æ€§å’Œæ–¹æ³•ä¸ AbstractQueuedSynchronizer å®Œå…¨ç›¸åŒï¼Œä½†æ‰€æœ‰ä¸çŠ¶æ€ç›¸å…³çš„å‚æ•°å’Œç»“æœéƒ½å®šä¹‰ä¸º long è€Œä¸æ˜¯ intã€‚å½“åˆ›å»ºéœ€è¦ 64 ä½çŠ¶æ€çš„å¤šçº§åˆ«é”å’Œå±éšœç­‰åŒæ­¥å™¨æ—¶ï¼Œæ­¤ç±»å¾ˆæœ‰ç”¨ã€‚

### æ ¸å¿ƒæŠ½è±¡ç±»(int): AbstractQueuedSynchonizer

> AbstractQueuedSynchonizerä¸ºæŠ½è±¡ç±»ï¼Œå…¶ä¸ºå®ç°ä¾èµ–äºå…ˆè¿›å…ˆå‡º (FIFO) ç­‰å¾…é˜Ÿåˆ—çš„é˜»å¡é”å’Œç›¸å…³åŒæ­¥å™¨(ä¿¡å·é‡ã€äº‹ä»¶ï¼Œç­‰ç­‰)æä¾›ä¸€ä¸ªæ¡†æ¶ã€‚æ­¤ç±»çš„è®¾è®¡ç›®æ ‡æ˜¯æˆä¸ºä¾é å•ä¸ªåŸå­ int å€¼æ¥è¡¨ç¤ºçŠ¶æ€çš„å¤§å¤šæ•°åŒæ­¥å™¨çš„ä¸€ä¸ªæœ‰ç”¨åŸºç¡€ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCé”: AbstractQueuedSynchonizerè¯¦è§£]()

### é”å¸¸ç”¨ç±»: LockSupport

> LockSupportä¸ºå¸¸ç”¨ç±»ï¼Œç”¨æ¥åˆ›å»ºé”å’Œå…¶ä»–åŒæ­¥ç±»çš„åŸºæœ¬çº¿ç¨‹é˜»å¡åŸè¯­ã€‚LockSupportçš„åŠŸèƒ½å’Œ"Threadä¸­çš„ Thread.suspend()å’ŒThread.resume()æœ‰ç‚¹ç±»ä¼¼"ï¼ŒLockSupportä¸­çš„park() å’Œ unpark() çš„ä½œç”¨åˆ†åˆ«æ˜¯é˜»å¡çº¿ç¨‹å’Œè§£é™¤é˜»å¡çº¿ç¨‹ã€‚ä½†æ˜¯park()å’Œunpark()ä¸ä¼šé‡åˆ°â€œThread.suspend å’Œ Thread.resumeæ‰€å¯èƒ½å¼•å‘çš„æ­»é”â€é—®é¢˜ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCé”: LockSupportè¯¦è§£]()

### é”å¸¸ç”¨ç±»: ReentrantLock

> ReentrantLockä¸ºå¸¸ç”¨ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯é‡å…¥çš„äº’æ–¥é” Lockï¼Œå®ƒå…·æœ‰ä¸ä½¿ç”¨ synchronized æ–¹æ³•å’Œè¯­å¥æ‰€è®¿é—®çš„éšå¼ç›‘è§†å™¨é”ç›¸åŒçš„ä¸€äº›åŸºæœ¬è¡Œä¸ºå’Œè¯­ä¹‰ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCé”: ReentrantLockè¯¦è§£](java/JUC/JUCé”è¯¦è§£)

### é”å¸¸ç”¨ç±»: ReentrantReadWriteLock

> ReentrantReadWriteLockæ˜¯è¯»å†™é”æ¥å£ReadWriteLockçš„å®ç°ç±»ï¼Œå®ƒåŒ…æ‹¬Lockå­ç±»ReadLockå’ŒWriteLockã€‚ReadLockæ˜¯å…±äº«é”ï¼ŒWriteLockæ˜¯ç‹¬å é”ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå·¥å…·ç±»: ReentrantReadWriteLockè¯¦è§£]()

### é”å¸¸ç”¨ç±»: StampedLock

> å®ƒæ˜¯java8åœ¨java.util.concurrent.locksæ–°å¢çš„ä¸€ä¸ªAPIã€‚StampedLockæ§åˆ¶é”æœ‰ä¸‰ç§æ¨¡å¼(å†™ï¼Œè¯»ï¼Œä¹è§‚è¯»)ï¼Œä¸€ä¸ªStampedLockçŠ¶æ€æ˜¯ç”±ç‰ˆæœ¬å’Œæ¨¡å¼ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼Œé”è·å–æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°å­—ä½œä¸ºç¥¨æ®stampï¼Œå®ƒç”¨ç›¸åº”çš„é”çŠ¶æ€è¡¨ç¤ºå¹¶æ§åˆ¶è®¿é—®ï¼Œæ•°å­—0è¡¨ç¤ºæ²¡æœ‰å†™é”è¢«æˆæƒè®¿é—®ã€‚åœ¨è¯»é”ä¸Šåˆ†ä¸ºæ‚²è§‚é”å’Œä¹è§‚é”ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [Java 8 - StampedLockè¯¦è§£]()

###  å·¥å…·å¸¸ç”¨ç±»: CountDownLatch

> CountDownLatchä¸ºå¸¸ç”¨ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒæ­¥è¾…åŠ©ç±»ï¼Œåœ¨å®Œæˆä¸€ç»„æ­£åœ¨å…¶ä»–çº¿ç¨‹ä¸­æ‰§è¡Œçš„æ“ä½œä¹‹å‰ï¼Œå®ƒå…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ä¸€ç›´ç­‰å¾…ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå·¥å…·ç±»: CountDownLatchè¯¦è§£]()

### å·¥å…·å¸¸ç”¨ç±»: CyclicBarrier

> CyclicBarrierä¸ºå¸¸ç”¨ç±»ï¼Œå…¶æ˜¯ä¸€ä¸ªåŒæ­¥è¾…åŠ©ç±»ï¼Œå®ƒå…è®¸ä¸€ç»„çº¿ç¨‹äº’ç›¸ç­‰å¾…ï¼Œç›´åˆ°åˆ°è¾¾æŸä¸ªå…¬å…±å±éšœç‚¹ (common barrier point)ã€‚åœ¨æ¶‰åŠä¸€ç»„å›ºå®šå¤§å°çš„çº¿ç¨‹çš„ç¨‹åºä¸­ï¼Œè¿™äº›çº¿ç¨‹å¿…é¡»ä¸æ—¶åœ°äº’ç›¸ç­‰å¾…ï¼Œæ­¤æ—¶ CyclicBarrier å¾ˆæœ‰ç”¨ã€‚å› ä¸ºè¯¥ barrier åœ¨é‡Šæ”¾ç­‰å¾…çº¿ç¨‹åå¯ä»¥é‡ç”¨ï¼Œæ‰€ä»¥ç§°å®ƒä¸ºå¾ªç¯ çš„ barrierã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå·¥å…·ç±»: CyclicBarrierè¯¦è§£]()

### å·¥å…·å¸¸ç”¨ç±»: Phaser

> Phaseræ˜¯JDK 7æ–°å¢çš„ä¸€ä¸ªåŒæ­¥è¾…åŠ©ç±»ï¼Œå®ƒå¯ä»¥å®ç°CyclicBarrierå’ŒCountDownLatchç±»ä¼¼çš„åŠŸèƒ½ï¼Œè€Œä¸”å®ƒæ”¯æŒå¯¹ä»»åŠ¡çš„åŠ¨æ€è°ƒæ•´ï¼Œå¹¶æ”¯æŒåˆ†å±‚ç»“æ„æ¥è¾¾åˆ°æ›´é«˜çš„ååé‡ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå·¥å…·ç±»: Phaserè¯¦è§£]()

### å·¥å…·å¸¸ç”¨ç±»: Semaphore

> Semaphoreä¸ºå¸¸ç”¨ç±»ï¼Œå…¶æ˜¯ä¸€ä¸ªè®¡æ•°ä¿¡å·é‡ï¼Œä»æ¦‚å¿µä¸Šè®²ï¼Œä¿¡å·é‡ç»´æŠ¤äº†ä¸€ä¸ªè®¸å¯é›†ã€‚å¦‚æœ‰å¿…è¦ï¼Œåœ¨è®¸å¯å¯ç”¨å‰ä¼šé˜»å¡æ¯ä¸€ä¸ª acquire()ï¼Œç„¶åå†è·å–è¯¥è®¸å¯ã€‚æ¯ä¸ª release() æ·»åŠ ä¸€ä¸ªè®¸å¯ï¼Œä»è€Œå¯èƒ½é‡Šæ”¾ä¸€ä¸ªæ­£åœ¨é˜»å¡çš„è·å–è€…ã€‚ä½†æ˜¯ï¼Œä¸ä½¿ç”¨å®é™…çš„è®¸å¯å¯¹è±¡ï¼ŒSemaphore åªå¯¹å¯ç”¨è®¸å¯çš„å·ç è¿›è¡Œè®¡æ•°ï¼Œå¹¶é‡‡å–ç›¸åº”çš„è¡ŒåŠ¨ã€‚é€šå¸¸ç”¨äºé™åˆ¶å¯ä»¥è®¿é—®æŸäº›èµ„æº(ç‰©ç†æˆ–é€»è¾‘çš„)çš„çº¿ç¨‹æ•°ç›®ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå·¥å…·ç±»: Semaphoreè¯¦è§£]()

### å·¥å…·å¸¸ç”¨ç±»: Exchanger

> Exchangeræ˜¯ç”¨äºçº¿ç¨‹åä½œçš„å·¥å…·ç±», ä¸»è¦ç”¨äºä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´çš„æ•°æ®äº¤æ¢ã€‚å®ƒæä¾›ä¸€ä¸ªåŒæ­¥ç‚¹ï¼Œåœ¨è¿™ä¸ªåŒæ­¥ç‚¹ï¼Œä¸¤ä¸ªçº¿ç¨‹å¯ä»¥äº¤æ¢å½¼æ­¤çš„æ•°æ®ã€‚è¿™ä¸¤ä¸ªçº¿ç¨‹é€šè¿‡exchange()æ–¹æ³•äº¤æ¢æ•°æ®ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œexchange()æ–¹æ³•åï¼Œå®ƒä¼šä¸€ç›´ç­‰å¾…ç¬¬äºŒä¸ªçº¿ç¨‹ä¹Ÿæ‰§è¡Œexchange()æ–¹æ³•ï¼Œå½“è¿™ä¸¤ä¸ªçº¿ç¨‹åˆ°è¾¾åŒæ­¥ç‚¹æ—¶ï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹å°±å¯ä»¥äº¤æ¢æ•°æ®äº†ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå·¥å…·ç±»: Exchangerè¯¦è§£]()

## Collections: å¹¶å‘é›†åˆ

### ç±»ç»“æ„å…³ç³»

![image](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-09-10/ccaa6f36-8503-48f7-8a98-3d0e3b304bcf_java-thread-x-juc-overview-2.png)

### Queue: ArrayBlockingQueue

> ä¸€ä¸ªç”±æ•°ç»„æ”¯æŒçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚æ­¤é˜Ÿåˆ—æŒ‰ FIFO(å…ˆè¿›å…ˆå‡º)åŸåˆ™å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚é˜Ÿåˆ—çš„å¤´éƒ¨ æ˜¯åœ¨é˜Ÿåˆ—ä¸­å­˜åœ¨æ—¶é—´æœ€é•¿çš„å…ƒç´ ã€‚é˜Ÿåˆ—çš„å°¾éƒ¨ æ˜¯åœ¨é˜Ÿåˆ—ä¸­å­˜åœ¨æ—¶é—´æœ€çŸ­çš„å…ƒç´ ã€‚æ–°å…ƒç´ æ’å…¥åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œé˜Ÿåˆ—è·å–æ“ä½œåˆ™æ˜¯ä»é˜Ÿåˆ—å¤´éƒ¨å¼€å§‹è·å¾—å…ƒç´ ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå¹¶å‘é›†åˆ: BlockingQueueè¯¦è§£]()

### Queue: LinkedBlockingQueue

> ä¸€ä¸ªåŸºäºå·²é“¾æ¥èŠ‚ç‚¹çš„ã€èŒƒå›´ä»»æ„çš„ blocking queueã€‚æ­¤é˜Ÿåˆ—æŒ‰ FIFO(å…ˆè¿›å…ˆå‡º)æ’åºå…ƒç´ ã€‚é˜Ÿåˆ—çš„å¤´éƒ¨ æ˜¯åœ¨é˜Ÿåˆ—ä¸­æ—¶é—´æœ€é•¿çš„å…ƒç´ ã€‚é˜Ÿåˆ—çš„å°¾éƒ¨ æ˜¯åœ¨é˜Ÿåˆ—ä¸­æ—¶é—´æœ€çŸ­çš„å…ƒç´ ã€‚æ–°å…ƒç´ æ’å…¥åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œå¹¶ä¸”é˜Ÿåˆ—è·å–æ“ä½œä¼šè·å¾—ä½äºé˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ã€‚é“¾æ¥é˜Ÿåˆ—çš„ååé‡é€šå¸¸è¦é«˜äºåŸºäºæ•°ç»„çš„é˜Ÿåˆ—ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°å¹¶å‘åº”ç”¨ç¨‹åºä¸­ï¼Œå…¶å¯é¢„çŸ¥çš„æ€§èƒ½è¦ä½ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå¹¶å‘é›†åˆ: BlockingQueueè¯¦è§£]()

### Queue: LinkedBlockingDeque

> ä¸€ä¸ªåŸºäºå·²é“¾æ¥èŠ‚ç‚¹çš„ã€ä»»é€‰èŒƒå›´çš„é˜»å¡åŒç«¯é˜Ÿåˆ—ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå¹¶å‘é›†åˆ: BlockingQueueè¯¦è§£]()

### Queue: ConcurrentLinkedQueue

> ä¸€ä¸ªåŸºäºé“¾æ¥èŠ‚ç‚¹çš„æ— ç•Œçº¿ç¨‹å®‰å…¨é˜Ÿåˆ—ã€‚æ­¤é˜Ÿåˆ—æŒ‰ç…§ FIFO(å…ˆè¿›å…ˆå‡º)åŸåˆ™å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚é˜Ÿåˆ—çš„å¤´éƒ¨ æ˜¯é˜Ÿåˆ—ä¸­æ—¶é—´æœ€é•¿çš„å…ƒç´ ã€‚é˜Ÿåˆ—çš„å°¾éƒ¨ æ˜¯é˜Ÿåˆ—ä¸­æ—¶é—´æœ€çŸ­çš„å…ƒç´ ã€‚æ–°çš„å…ƒç´ æ’å…¥åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œé˜Ÿåˆ—è·å–æ“ä½œä»é˜Ÿåˆ—å¤´éƒ¨è·å¾—å…ƒç´ ã€‚å½“å¤šä¸ªçº¿ç¨‹å…±äº«è®¿é—®ä¸€ä¸ªå…¬å…± collection æ—¶ï¼ŒConcurrentLinkedQueue æ˜¯ä¸€ä¸ªæ°å½“çš„é€‰æ‹©ã€‚æ­¤é˜Ÿåˆ—ä¸å…è®¸ä½¿ç”¨ null å…ƒç´ ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå¹¶å‘é›†åˆ: ConcurrentLinkedQueueè¯¦è§£]()

### Queue: ConcurrentLinkedDeque

> æ˜¯åŒå‘é“¾è¡¨å®ç°çš„æ— ç•Œé˜Ÿåˆ—ï¼Œè¯¥é˜Ÿåˆ—åŒæ—¶æ”¯æŒFIFOå’ŒFILOä¸¤ç§æ“ä½œæ–¹å¼ã€‚

### Queue: DelayQueue

> å»¶æ—¶æ— ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œä½¿ç”¨Lockæœºåˆ¶å®ç°å¹¶å‘è®¿é—®ã€‚é˜Ÿåˆ—é‡Œåªå…è®¸æ”¾å¯ä»¥â€œå»¶æœŸâ€çš„å…ƒç´ ï¼Œé˜Ÿåˆ—ä¸­çš„headæ˜¯æœ€å…ˆâ€œåˆ°æœŸâ€çš„å…ƒç´ ã€‚å¦‚æœé˜Ÿé‡Œä¸­æ²¡æœ‰å…ƒç´ åˆ°â€œåˆ°æœŸâ€ï¼Œé‚£ä¹ˆå°±ç®—é˜Ÿåˆ—ä¸­æœ‰å…ƒç´ ä¹Ÿä¸èƒ½è·å–åˆ°ã€‚

### Queue: PriorityBlockingQueue

> æ— ç•Œä¼˜å…ˆçº§é˜»å¡é˜Ÿåˆ—ï¼Œä½¿ç”¨Lockæœºåˆ¶å®ç°å¹¶å‘è®¿é—®ã€‚priorityQueueçš„çº¿ç¨‹å®‰å…¨ç‰ˆï¼Œä¸å…è®¸å­˜æ”¾nullå€¼ï¼Œä¾èµ–äºcomparableçš„æ’åºï¼Œä¸å…è®¸å­˜æ”¾ä¸å¯æ¯”è¾ƒçš„å¯¹è±¡ç±»å‹ã€‚

### Queue: SynchronousQueue

> æ²¡æœ‰å®¹é‡çš„åŒæ­¥é˜Ÿåˆ—ï¼Œé€šè¿‡CASå®ç°å¹¶å‘è®¿é—®ï¼Œæ”¯æŒFIFOå’ŒFILOã€‚

### Queue: LinkedTransferQueue

> JDK 7æ–°å¢ï¼Œå•å‘é“¾è¡¨å®ç°çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œé€šè¿‡CASå®ç°å¹¶å‘è®¿é—®ï¼Œé˜Ÿåˆ—å…ƒç´ ä½¿ç”¨ FIFO(å…ˆè¿›å…ˆå‡º)æ–¹å¼ã€‚LinkedTransferQueueå¯ä»¥è¯´æ˜¯ConcurrentLinkedQueueã€SynchronousQueue(å…¬å¹³æ¨¡å¼)å’ŒLinkedBlockingQueueçš„è¶…é›†, å®ƒä¸ä»…ä»…ç»¼åˆäº†è¿™å‡ ä¸ªç±»çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†æ›´é«˜æ•ˆçš„å®ç°ã€‚

### List: CopyOnWriteArrayList

> ArrayList çš„ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å˜ä½“ï¼Œå…¶ä¸­æ‰€æœ‰å¯å˜æ“ä½œ(addã€set ç­‰ç­‰)éƒ½æ˜¯é€šè¿‡å¯¹åº•å±‚æ•°ç»„è¿›è¡Œä¸€æ¬¡æ–°çš„å¤åˆ¶æ¥å®ç°çš„ã€‚è¿™ä¸€èˆ¬éœ€è¦å¾ˆå¤§çš„å¼€é”€ï¼Œä½†æ˜¯å½“éå†æ“ä½œçš„æ•°é‡å¤§å¤§è¶…è¿‡å¯å˜æ“ä½œçš„æ•°é‡æ—¶ï¼Œè¿™ç§æ–¹æ³•å¯èƒ½æ¯”å…¶ä»–æ›¿ä»£æ–¹æ³•æ›´ æœ‰æ•ˆã€‚åœ¨ä¸èƒ½æˆ–ä¸æƒ³è¿›è¡ŒåŒæ­¥éå†ï¼Œä½†åˆéœ€è¦ä»å¹¶å‘çº¿ç¨‹ä¸­æ’é™¤å†²çªæ—¶ï¼Œå®ƒä¹Ÿå¾ˆæœ‰ç”¨ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå¹¶å‘é›†åˆ: CopyOnWriteArrayListè¯¦è§£]()

### Set: CopyOnWriteArraySet

> å¯¹å…¶æ‰€æœ‰æ“ä½œä½¿ç”¨å†…éƒ¨CopyOnWriteArrayListçš„Setã€‚å³å°†æ‰€æœ‰æ“ä½œè½¬å‘è‡³CopyOnWriteArayListæ¥è¿›è¡Œæ“ä½œï¼Œèƒ½å¤Ÿä¿è¯çº¿ç¨‹å®‰å…¨ã€‚åœ¨addæ—¶ï¼Œä¼šè°ƒç”¨addIfAbsentï¼Œç”±äºæ¯æ¬¡addæ—¶éƒ½è¦è¿›è¡Œæ•°ç»„éå†ï¼Œå› æ­¤æ€§èƒ½ä¼šç•¥ä½äºCopyOnWriteArrayListã€‚

### Set: ConcurrentSkipListSet

> ä¸€ä¸ªåŸºäºConcurrentSkipListMap çš„å¯ç¼©æ”¾å¹¶å‘ NavigableSet å®ç°ã€‚set çš„å…ƒç´ å¯ä»¥æ ¹æ®å®ƒä»¬çš„è‡ªç„¶é¡ºåºè¿›è¡Œæ’åºï¼Œä¹Ÿå¯ä»¥æ ¹æ®åˆ›å»º set æ—¶æ‰€æä¾›çš„ Comparator è¿›è¡Œæ’åºï¼Œå…·ä½“å–å†³äºä½¿ç”¨çš„æ„é€ æ–¹æ³•ã€‚

### Map: ConcurrentHashMap

> æ˜¯çº¿ç¨‹å®‰å…¨HashMapçš„ã€‚ConcurrentHashMapåœ¨JDK 7ä¹‹å‰æ˜¯é€šè¿‡Lockå’Œsegment(åˆ†æ®µé”)å®ç°ï¼ŒJDK 8 ä¹‹åæ”¹ä¸ºCAS+synchronizedæ¥ä¿è¯å¹¶å‘å®‰å…¨ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCå¹¶å‘é›†åˆ: ConcurrentHashMapè¯¦è§£](), åŒ…å«äº†å¯¹JDK 7å’ŒJDK 8ç‰ˆæœ¬çš„æºç åˆ†æã€‚

### Map: ConcurrentSkipListMap

> çº¿ç¨‹å®‰å…¨çš„æœ‰åºçš„å“ˆå¸Œè¡¨(ç›¸å½“äºçº¿ç¨‹å®‰å…¨çš„TreeMap);æ˜ å°„å¯ä»¥æ ¹æ®é”®çš„è‡ªç„¶é¡ºåºè¿›è¡Œæ’åºï¼Œä¹Ÿå¯ä»¥æ ¹æ®åˆ›å»ºæ˜ å°„æ—¶æ‰€æä¾›çš„ Comparator è¿›è¡Œæ’åºï¼Œå…·ä½“å–å†³äºä½¿ç”¨çš„æ„é€ æ–¹æ³•ã€‚

## Atomic: åŸå­ç±»

å…¶åŸºæœ¬çš„ç‰¹æ€§å°±æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œè¿™äº›ç±»çš„å®ä¾‹åŒ…å«çš„æ–¹æ³•æ—¶ï¼Œå…·æœ‰æ’ä»–æ€§ï¼Œå³å½“æŸä¸ªçº¿ç¨‹è¿›å…¥æ–¹æ³•ï¼Œæ‰§è¡Œå…¶ä¸­çš„æŒ‡ä»¤æ—¶ï¼Œä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­ï¼Œè€Œåˆ«çš„çº¿ç¨‹å°±åƒè‡ªæ—‹é”ä¸€æ ·ï¼Œä¸€ç›´ç­‰åˆ°è¯¥æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œæ‰ç”±JVMä»ç­‰å¾…é˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªå¦ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ï¼Œè¿™åªæ˜¯ä¸€ç§é€»è¾‘ä¸Šçš„ç†è§£ã€‚å®é™…ä¸Šæ˜¯å€ŸåŠ©ç¡¬ä»¶çš„ç›¸å…³æŒ‡ä»¤æ¥å®ç°çš„ï¼Œä¸ä¼šé˜»å¡çº¿ç¨‹(æˆ–è€…è¯´åªæ˜¯åœ¨ç¡¬ä»¶çº§åˆ«ä¸Šé˜»å¡äº†)ã€‚

å¯¹CASï¼ŒUnsafeç±»ï¼Œä»¥åŠ13ä¸ªåŸå­ç±»è¯¦è§£è¯·å‚è€ƒï¼šè¯¦ç»†åˆ†æè¯·çœ‹: [JUCåŸå­ç±»: CAS, Unsafeå’ŒåŸå­ç±»è¯¦è§£](/java/JUC/CAS,Unsafeå’ŒåŸå­ç±»è¯¦è§£)

### åŸºç¡€ç±»å‹ï¼šAtomicBooleanï¼ŒAtomicIntegerï¼ŒAtomicLong

> AtomicBooleanï¼ŒAtomicIntegerï¼ŒAtomicLongæ˜¯ç±»ä¼¼çš„ï¼Œåˆ†åˆ«é’ˆå¯¹boolï¼Œintergerï¼Œlongçš„åŸå­ç±»ã€‚

### æ•°ç»„ï¼šAtomicIntegerArrayï¼ŒAtomicLongArrayï¼ŒBooleanArray

> AtomicIntegerArrayï¼ŒAtomicLongArrayï¼ŒAtomicBooleanArrayæ˜¯æ•°ç»„åŸå­ç±»ã€‚

### å¼•ç”¨ï¼šAtomicReferenceï¼ŒAtomicMarkedReferenceï¼ŒAtomicStampedReference

> AtomicReferenceï¼ŒAtomicMarkedReferenceï¼ŒAtomicStampedReferenceæ˜¯å¼•ç”¨ç›¸å…³çš„åŸå­ç±»ã€‚

### FieldUpdaterï¼šAtomicLongFieldUpdaterï¼ŒAtomicIntegerFieldUpdaterï¼ŒAtomicReferenceFieldUpdater

> AtomicLongFieldUpdaterï¼ŒAtomicIntegerFieldUpdaterï¼ŒAtomicReferenceFieldUpdateræ˜¯FieldUpdateråŸå­ç±»ã€‚

## Executors: çº¿ç¨‹æ± 

### ç±»ç»“æ„å…³ç³»

![img](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-09-10/fed13dd3-13ac-42f4-8b3e-18c57c31608d_java-thread-x-juc-executors-1.png)

### æ¥å£: Executor

> Executoræ¥å£æä¾›ä¸€ç§å°†ä»»åŠ¡æäº¤ä¸æ¯ä¸ªä»»åŠ¡å°†å¦‚ä½•è¿è¡Œçš„æœºåˆ¶(åŒ…æ‹¬çº¿ç¨‹ä½¿ç”¨çš„ç»†èŠ‚ã€è°ƒåº¦ç­‰)åˆ†ç¦»å¼€æ¥çš„æ–¹æ³•ã€‚é€šå¸¸ä½¿ç”¨ Executor è€Œä¸æ˜¯æ˜¾å¼åœ°åˆ›å»ºçº¿ç¨‹ã€‚

### ExecutorService

> ExecutorServiceç»§æ‰¿è‡ªExecutoræ¥å£ï¼ŒExecutorServiceæä¾›äº†ç®¡ç†ç»ˆæ­¢çš„æ–¹æ³•ï¼Œä»¥åŠå¯ä¸ºè·Ÿè¸ªä¸€ä¸ªæˆ–å¤šä¸ªå¼‚æ­¥ä»»åŠ¡æ‰§è¡ŒçŠ¶å†µè€Œç”Ÿæˆ Future çš„æ–¹æ³•ã€‚ å¯ä»¥å…³é—­ ExecutorServiceï¼Œè¿™å°†å¯¼è‡´å…¶åœæ­¢æ¥å—æ–°ä»»åŠ¡ã€‚å…³é—­åï¼Œæ‰§è¡Œç¨‹åºå°†æœ€åç»ˆæ­¢ï¼Œè¿™æ—¶æ²¡æœ‰ä»»åŠ¡åœ¨æ‰§è¡Œï¼Œä¹Ÿæ²¡æœ‰ä»»åŠ¡åœ¨ç­‰å¾…æ‰§è¡Œï¼Œå¹¶ä¸”æ— æ³•æäº¤æ–°ä»»åŠ¡ã€‚

### ScheduledExecutorService

> ScheduledExecutorServiceç»§æ‰¿è‡ªExecutorServiceæ¥å£ï¼Œå¯å®‰æ’åœ¨ç»™å®šçš„å»¶è¿Ÿåè¿è¡Œæˆ–å®šæœŸæ‰§è¡Œçš„å‘½ä»¤ã€‚

### AbstractExecutorService

> AbstractExecutorServiceç»§æ‰¿è‡ªExecutorServiceæ¥å£ï¼Œå…¶æä¾› ExecutorService æ‰§è¡Œæ–¹æ³•çš„é»˜è®¤å®ç°ã€‚æ­¤ç±»ä½¿ç”¨ newTaskFor è¿”å›çš„ RunnableFuture å®ç° submitã€invokeAny å’Œ invokeAll æ–¹æ³•ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒRunnableFuture æ˜¯æ­¤åŒ…ä¸­æä¾›çš„ FutureTask ç±»ã€‚

### FutureTask

> FutureTask ä¸º Future æä¾›äº†åŸºç¡€å®ç°ï¼Œå¦‚è·å–ä»»åŠ¡æ‰§è¡Œç»“æœ(get)å’Œå–æ¶ˆä»»åŠ¡(cancel)ç­‰ã€‚å¦‚æœä»»åŠ¡å°šæœªå®Œæˆï¼Œè·å–ä»»åŠ¡æ‰§è¡Œç»“æœæ—¶å°†ä¼šé˜»å¡ã€‚ä¸€æ—¦æ‰§è¡Œç»“æŸï¼Œä»»åŠ¡å°±ä¸èƒ½è¢«é‡å¯æˆ–å–æ¶ˆ(é™¤éä½¿ç”¨runAndResetæ‰§è¡Œè®¡ç®—)ã€‚FutureTask å¸¸ç”¨æ¥å°è£… Callable å’Œ Runnableï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± ä¸­æ‰§è¡Œã€‚é™¤äº†ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç±»ä¹‹å¤–ï¼Œæ­¤ç±»ä¹Ÿæä¾›äº†ä¸€äº›åŠŸèƒ½æ€§å‡½æ•°ä¾›æˆ‘ä»¬åˆ›å»ºè‡ªå®šä¹‰ task ç±»ä½¿ç”¨ã€‚FutureTask çš„çº¿ç¨‹å®‰å…¨ç”±CASæ¥ä¿è¯ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCçº¿ç¨‹æ± : FutureTaskè¯¦è§£]()

### æ ¸å¿ƒ: ThreadPoolExecutor

> ThreadPoolExecutorå®ç°äº†AbstractExecutorServiceæ¥å£ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª ExecutorServiceï¼Œå®ƒä½¿ç”¨å¯èƒ½çš„å‡ ä¸ªæ± çº¿ç¨‹ä¹‹ä¸€æ‰§è¡Œæ¯ä¸ªæäº¤çš„ä»»åŠ¡ï¼Œé€šå¸¸ä½¿ç”¨ Executors å·¥å‚æ–¹æ³•é…ç½®ã€‚ çº¿ç¨‹æ± å¯ä»¥è§£å†³ä¸¤ä¸ªä¸åŒé—®é¢˜: ç”±äºå‡å°‘äº†æ¯ä¸ªä»»åŠ¡è°ƒç”¨çš„å¼€é”€ï¼Œå®ƒä»¬é€šå¸¸å¯ä»¥åœ¨æ‰§è¡Œå¤§é‡å¼‚æ­¥ä»»åŠ¡æ—¶æä¾›å¢å¼ºçš„æ€§èƒ½ï¼Œå¹¶ä¸”è¿˜å¯ä»¥æä¾›ç»‘å®šå’Œç®¡ç†èµ„æº(åŒ…æ‹¬æ‰§è¡Œä»»åŠ¡é›†æ—¶ä½¿ç”¨çš„çº¿ç¨‹)çš„æ–¹æ³•ã€‚æ¯ä¸ª ThreadPoolExecutor è¿˜ç»´æŠ¤ç€ä¸€äº›åŸºæœ¬çš„ç»Ÿè®¡æ•°æ®ï¼Œå¦‚å®Œæˆçš„ä»»åŠ¡æ•°ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCçº¿ç¨‹æ± : ThreadPoolExecutorè¯¦è§£]()

### æ ¸å¿ƒ: ScheduledThreadExecutor

> ScheduledThreadPoolExecutorå®ç°ScheduledExecutorServiceæ¥å£ï¼Œå¯å®‰æ’åœ¨ç»™å®šçš„å»¶è¿Ÿåè¿è¡Œå‘½ä»¤ï¼Œæˆ–è€…å®šæœŸæ‰§è¡Œå‘½ä»¤ã€‚éœ€è¦å¤šä¸ªè¾…åŠ©çº¿ç¨‹æ—¶ï¼Œæˆ–è€…è¦æ±‚ ThreadPoolExecutor å…·æœ‰é¢å¤–çš„çµæ´»æ€§æˆ–åŠŸèƒ½æ—¶ï¼Œæ­¤ç±»è¦ä¼˜äº Timerã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCçº¿ç¨‹æ± : ScheduledThreadExecutorè¯¦è§£]()

### æ ¸å¿ƒ: Fork/Joinæ¡†æ¶

> ForkJoinPool æ˜¯JDK 7åŠ å…¥çš„ä¸€ä¸ªçº¿ç¨‹æ± ç±»ã€‚Fork/Join æŠ€æœ¯æ˜¯åˆ†æ²»ç®—æ³•(Divide-and-Conquer)çš„å¹¶è¡Œå®ç°ï¼Œå®ƒæ˜¯ä¸€é¡¹å¯ä»¥è·å¾—è‰¯å¥½çš„å¹¶è¡Œæ€§èƒ½çš„ç®€å•ä¸”é«˜æ•ˆçš„è®¾è®¡æŠ€æœ¯ã€‚ç›®çš„æ˜¯ä¸ºäº†å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°åˆ©ç”¨å¤šå¤„ç†å™¨å¸¦æ¥çš„å¥½å¤„ï¼Œä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„è¿ç®—èƒ½åŠ›æ¥æå‡åº”ç”¨çš„æ€§èƒ½ã€‚

è¯¦ç»†åˆ†æè¯·çœ‹: [JUCçº¿ç¨‹æ± : Fork/Joinæ¡†æ¶è¯¦è§£]()

### å·¥å…·ç±»: Executors

> Executorsæ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œç”¨å…¶å¯ä»¥åˆ›å»ºExecutorServiceã€ScheduledExecutorServiceã€ThreadFactoryã€Callableç­‰å¯¹è±¡ã€‚å®ƒçš„ä½¿ç”¨èå…¥åˆ°äº†ThreadPoolExecutor, ScheduledThreadExecutorå’ŒForkJoinPoolä¸­ã€‚



## è¯¾åé—®é¢˜

- JUCæ¡†æ¶åŒ…å«å‡ ä¸ªéƒ¨åˆ†?
- æ¯ä¸ªéƒ¨åˆ†æœ‰å“ªäº›æ ¸å¿ƒçš„ç±»?
- æœ€æœ€æ ¸å¿ƒçš„ç±»æœ‰å“ªäº›?



## å‚è€ƒæ–‡ç« 

- æœ¬æ–‡è½¬è½½è‡ª[Java å…¨æ ˆçŸ¥è¯†ä½“ç³»](https://www.pdai.tech/md/java/thread/java-thread-x-juc-overview.html)	