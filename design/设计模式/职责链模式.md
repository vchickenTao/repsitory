**<span style="font-size: 35px;">ğŸ§‘â€ğŸ³ è¡Œä¸ºå‹æ¨¡å¼-èŒè´£é“¾æ¨¡å¼</span>**

---

â€œä¸€å¯¹äºŒâ€ï¼Œâ€œè¿‡â€ï¼Œâ€œè¿‡â€â€¦â€¦è¿™å£°éŸ³ç†Ÿæ‚‰å—ï¼Ÿä½ ä¼šæƒ³åˆ°ä»€ä¹ˆï¼Ÿ

å¯¹ï¼çº¸ç‰Œã€‚åœ¨ç±»ä¼¼â€œæ–—åœ°ä¸»â€è¿™æ ·çš„çº¸ç‰Œæ¸¸æˆä¸­ï¼ŒæŸäººå‡ºç‰Œç»™ä»–çš„ä¸‹å®¶ï¼Œä¸‹å®¶çœ‹çœ‹æ‰‹ä¸­çš„ç‰Œï¼Œå¦‚æœè¦ä¸èµ·ä¸Šå®¶çš„ç‰Œåˆ™å°†å‡ºç‰Œè¯·æ±‚å†è½¬å‘ç»™ä»–çš„ä¸‹å®¶ï¼Œå…¶ä¸‹å®¶å†è¿›è¡Œåˆ¤æ–­ã€‚

ä¸€ä¸ªå¾ªç¯ä¸‹æ¥ï¼Œå¦‚æœå…¶ä»–äººéƒ½è¦ä¸èµ·è¯¥ç‰Œï¼Œåˆ™æœ€åˆçš„å‡ºç‰Œè€…å¯ä»¥æ‰“å‡ºæ–°çš„ç‰Œã€‚

åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç‰Œä½œä¸ºä¸€ä¸ªè¯·æ±‚æ²¿ç€ä¸€æ¡é“¾åœ¨ä¼ é€’ï¼Œæ¯ä¸€ä½çº¸ç‰Œçš„ç©å®¶éƒ½å¯ä»¥å¤„ç†è¯¥è¯·æ±‚ã€‚

åœ¨è®¾è®¡æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ä¸€ç§ä¸“é—¨ç”¨äºå¤„ç†è¿™ç§è¯·æ±‚é“¾å¼ä¼ é€’çš„æ¨¡å¼ï¼Œå®ƒå°±æ˜¯æœ¬ç« å°†è¦ä»‹ç»çš„èŒè´£é“¾æ¨¡å¼ã€‚

## æ¨¡å¼æ¦‚è¿°

å¾ˆå¤šæƒ…å†µä¸‹ï¼Œåœ¨ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿä¸­å¯ä»¥å¤„ç†æŸä¸ªè¯·æ±‚çš„å¯¹è±¡ä¸æ­¢ä¸€ä¸ªã€‚

èŒè´£é“¾å¯ä»¥æ˜¯ä¸€æ¡ç›´çº¿ã€ä¸€ä¸ªç¯æˆ–è€…ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œæœ€å¸¸è§çš„èŒè´£é“¾æ˜¯ç›´çº¿å‹ï¼Œå³æ²¿ç€ä¸€æ¡å•å‘çš„é“¾æ¥ä¼ é€’è¯·æ±‚ã€‚

é“¾ä¸Šçš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯è¯·æ±‚å¤„ç†è€…ï¼ŒèŒè´£é“¾æ¨¡å¼å¯ä»¥å°†è¯·æ±‚çš„å¤„ç†è€…ç»„ç»‡æˆä¸€æ¡é“¾ï¼Œå¹¶è®©è¯·æ±‚æ²¿ç€é“¾ä¼ é€’ï¼Œç”±é“¾ä¸Šçš„å¤„ç†è€…å¯¹è¯·æ±‚è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚

å®¢æˆ·ç«¯æ— é¡»å…³å¿ƒè¯·æ±‚çš„å¤„ç†ç»†èŠ‚ä»¥åŠè¯·æ±‚çš„ä¼ é€’ï¼Œåªéœ€å°†è¯·æ±‚å‘é€åˆ°é“¾ä¸Šå³å¯ï¼Œå®ç°è¯·æ±‚å‘é€è€…å’Œè¯·æ±‚å¤„ç†è€…è§£è€¦ã€‚

### æ¨¡å¼å®šä¹‰

> èŒè´£é“¾æ¨¡å¼(Chain of Responsibility  Pattern)ï¼šé¿å…è¯·æ±‚å‘é€è€…ä¸æ¥æ”¶è€…è€¦åˆåœ¨ä¸€èµ·ï¼Œè®©å¤šä¸ªå¯¹è±¡éƒ½æœ‰å¯èƒ½æ¥æ”¶è¯·æ±‚ï¼Œå°†è¿™äº›å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶ä¸”æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚èŒè´£é“¾æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚

### æ¨¡å¼ç»“æ„å›¾

èŒè´£é“¾æ¨¡å¼ç»“æ„çš„æ ¸å¿ƒåœ¨äºå¼•å…¥äº†ä¸€ä¸ªæŠ½è±¡å¤„ç†è€…ã€‚èŒè´£é“¾æ¨¡å¼ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://img2020.cnblogs.com/blog/1546632/202111/1546632-20211101153436048-527226444.png)

åœ¨èŒè´£é“¾æ¨¡å¼ç»“æ„å›¾ä¸­åŒ…å«å¦‚ä¸‹å‡ ä¸ªè§’è‰²ï¼š

- Handlerï¼ˆæŠ½è±¡å¤„ç†è€…ï¼‰

å®ƒå®šä¹‰äº†ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ¥å£ï¼Œä¸€èˆ¬è®¾è®¡ä¸ºæŠ½è±¡ç±»ï¼Œç”±äºä¸åŒçš„å…·ä½“å¤„ç†è€…å¤„ç†è¯·æ±‚çš„æ–¹å¼ä¸åŒï¼Œå› æ­¤åœ¨å…¶ä¸­å®šä¹‰äº†æŠ½è±¡è¯·æ±‚å¤„ç†æ–¹æ³•ã€‚å› ä¸ºæ¯ä¸€ä¸ªå¤„ç†è€…çš„ä¸‹å®¶è¿˜æ˜¯ä¸€ä¸ªå¤„ç†è€…ï¼Œå› æ­¤åœ¨æŠ½è±¡å¤„ç†è€…ä¸­å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡å¤„ç†è€…ç±»å‹çš„å¯¹è±¡ï¼ˆå¦‚ç»“æ„å›¾ä¸­çš„successorï¼‰ï¼Œä½œä¸ºå…¶å¯¹ä¸‹å®¶çš„å¼•ç”¨ã€‚é€šè¿‡è¯¥å¼•ç”¨ï¼Œå¤„ç†è€…å¯ä»¥è¿æˆä¸€æ¡é“¾ã€‚

- ConcreteHandlerï¼ˆå…·ä½“å¤„ç†è€…ï¼‰

å®ƒæ˜¯æŠ½è±¡å¤„ç†è€…çš„å­ç±»ï¼Œå¯ä»¥å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œåœ¨å…·ä½“å¤„ç†è€…ç±»ä¸­å®ç°äº†æŠ½è±¡å¤„ç†è€…ä¸­å®šä¹‰çš„æŠ½è±¡è¯·æ±‚å¤„ç†æ–¹æ³•ï¼Œåœ¨å¤„ç†è¯·æ±‚ä¹‹å‰éœ€è¦è¿›è¡Œåˆ¤æ–­ï¼Œçœ‹æ˜¯å¦æœ‰ç›¸åº”çš„å¤„ç†æƒé™ï¼Œå¦‚æœå¯ä»¥å¤„ç†è¯·æ±‚å°±å¤„ç†å®ƒï¼Œå¦åˆ™å°†è¯·æ±‚è½¬å‘ç»™åç»§è€…ï¼›åœ¨å…·ä½“å¤„ç†è€…ä¸­å¯ä»¥è®¿é—®é“¾ä¸­ä¸‹ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿è¯·æ±‚çš„è½¬å‘ã€‚

### æ¨¡å¼ä¼ªä»£ç 

åœ¨èŒè´£é“¾æ¨¡å¼é‡Œï¼Œå¾ˆå¤šå¯¹è±¡ç”±æ¯ä¸€ä¸ªå¯¹è±¡å¯¹å…¶ä¸‹å®¶çš„å¼•ç”¨è€Œè¿æ¥èµ·æ¥å½¢æˆä¸€æ¡é“¾ã€‚

è¯·æ±‚åœ¨è¿™ä¸ªé“¾ä¸Šä¼ é€’ï¼Œç›´åˆ°é“¾ä¸Šçš„æŸä¸€ä¸ªå¯¹è±¡å†³å®šå¤„ç†æ­¤è¯·æ±‚ã€‚

å‘å‡ºè¿™ä¸ªè¯·æ±‚çš„å®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“é“¾ä¸Šçš„å“ªä¸€ä¸ªå¯¹è±¡æœ€ç»ˆå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè¿™ä½¿å¾—ç³»ç»Ÿå¯ä»¥åœ¨ä¸å½±å“å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹åŠ¨æ€åœ°é‡æ–°ç»„ç»‡é“¾å’Œåˆ†é…è´£ä»»ã€‚

èŒè´£é“¾æ¨¡å¼çš„æ ¸å¿ƒåœ¨äºæŠ½è±¡å¤„ç†è€…ç±»çš„è®¾è®¡ï¼ŒæŠ½è±¡å¤„ç†è€…çš„å…¸å‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
public abstract class Handler {
    // ç»´æŒå¯¹ä¸‹å®¶çš„å¼•ç”¨
    protected Handler successor;

    // æŠ½è±¡å¤„ç†è¯·æ±‚çš„æ–¹æ³•
    public abstract void handleRequest(Object request);
}

public class ConcreteHandler extends Handler {
    @Override
    public void handleRequest(Object request) {
        if (è¯·æ±‚æ»¡è¶³æ¡ä»¶) {
            // å¤„ç†è¯·æ±‚
        } else {
            // è½¬å‘è¯·æ±‚
            this.successor.handleRequest(request);
        }
    }
}
```

æ³¨æ„ï¼Œåˆ›å»ºèŒè´£é“¾ä¼ªä»£ç è¿™é‡Œæ²¡æœ‰å†™ã€‚å…¶å®å¾ˆç®€å•ï¼Œå…ˆåˆ›å»ºè¿™äº›å…·ä½“çš„å¤„ç†å™¨å¯¹è±¡ï¼Œç„¶åä¾æ¬¡æŠŠè¿™äº›å¤„ç†å™¨å¯¹è±¡ä¸²èµ·æ¥ã€‚

èŒè´£é“¾æ¨¡å¼é™ä½äº†è¯·æ±‚çš„å‘é€ç«¯å’Œæ¥æ”¶ç«¯ä¹‹é—´çš„è€¦åˆï¼Œä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚

### çº¯ä¸ä¸çº¯çš„èŒè´£é“¾æ¨¡å¼

èŒè´£é“¾æ¨¡å¼å¯åˆ†ä¸ºçº¯çš„èŒè´£é“¾æ¨¡å¼å’Œä¸çº¯çš„èŒè´£é“¾æ¨¡å¼ä¸¤ç§ï¼š

- çº¯çš„èŒè´£é“¾æ¨¡å¼

ä¸€ä¸ªçº¯çš„èŒè´£é“¾æ¨¡å¼è¦æ±‚ä¸€ä¸ªå…·ä½“å¤„ç†è€…å¯¹è±¡åªèƒ½åœ¨ä¸¤ä¸ªè¡Œä¸ºä¸­é€‰æ‹©ä¸€ä¸ªï¼šè¦ä¹ˆæ‰¿æ‹…å…¨éƒ¨è´£ä»»ï¼Œè¦ä¹ˆå°†è´£ä»»æ¨ç»™ä¸‹å®¶ï¼Œä¸å…è®¸å‡ºç°æŸä¸€ä¸ªå…·ä½“å¤„ç†è€…å¯¹è±¡åœ¨æ‰¿æ‹…äº†ä¸€éƒ¨åˆ†æˆ–å…¨éƒ¨è´£ä»»ååˆå°†è´£ä»»å‘ä¸‹ä¼ é€’çš„æƒ…å†µã€‚

è€Œä¸”åœ¨çº¯çš„èŒè´£é“¾æ¨¡å¼ä¸­ï¼Œè¦æ±‚ä¸€ä¸ªè¯·æ±‚å¿…é¡»è¢«æŸä¸€ä¸ªå¤„ç†è€…å¯¹è±¡æ‰€æ¥æ”¶ï¼Œä¸èƒ½å‡ºç°æŸä¸ªè¯·æ±‚æœªè¢«ä»»ä½•ä¸€ä¸ªå¤„ç†è€…å¯¹è±¡å¤„ç†çš„æƒ…å†µã€‚

- ä¸çº¯çš„èŒè´£é“¾æ¨¡å¼

åœ¨ä¸€ä¸ªä¸çº¯çš„èŒè´£é“¾æ¨¡å¼ä¸­å…è®¸æŸä¸ªè¯·æ±‚è¢«ä¸€ä¸ªå…·ä½“å¤„ç†è€…éƒ¨åˆ†å¤„ç†åå†å‘ä¸‹ä¼ é€’ï¼Œæˆ–è€…ä¸€ä¸ªå…·ä½“å¤„ç†è€…å¤„ç†å®ŒæŸè¯·æ±‚åå…¶åç»§å¤„ç†è€…å¯ä»¥ç»§ç»­å¤„ç†è¯¥è¯·æ±‚ï¼Œè€Œä¸”ä¸€ä¸ªè¯·æ±‚å¯ä»¥æœ€ç»ˆä¸è¢«ä»»ä½•å¤„ç†è€…å¯¹è±¡æ‰€æ¥æ”¶ã€‚

## æ¨¡å¼å®ç°

```java
public abstract class Handler {
    protected Handler successor;

    public Handler(Handler successor) {
        this.successor = successor;
    }

    protected abstract void handleRequest(Request request);
}

```

```java
public class ConcreteHandler1 extends Handler {
    public ConcreteHandler1(Handler successor) {
        super(successor);
    }

    @Override
    protected void handleRequest(Request request) {
        if (request.getType() == RequestType.type1) {
            System.out.println(request.getName() + " is handle by ConcreteHandler1");
            return;
        }
        if (successor != null) {
            successor.handleRequest(request);
        }
    }
}

```

```java
public class ConcreteHandler2 extends Handler{
    public ConcreteHandler2(Handler successor) {
        super(successor);
    }

    @Override
    protected void handleRequest(Request request) {
        if (request.getType() == RequestType.type2) {
            System.out.println(request.getName() + " is handle by ConcreteHandler2");
            return;
        }
        if (successor != null) {
            successor.handleRequest(request);
        }
    }
}

```

```java
public class Request {
    private RequestType type;
    private String name;

    public Request(RequestType type, String name) {
        this.type = type;
        this.name = name;
    }

    public RequestType getType() {
        return type;
    }

    public String getName() {
        return name;
    }
}

```

```java
public enum RequestType {
    type1, type2
}

```

```java
public class Client {
    public static void main(String[] args) {
        Handler handler1 = new ConcreteHandler1(null);
        Handler handler2 = new ConcreteHandler2(handler1);
        Request request1 = new Request(RequestType.type1, "request1");
        handler2.handleRequest(request1);
        Request request2 = new Request(RequestType.type2, "request2");
        handler2.handleRequest(request2);
    }
}

```

```java
request1 is handle by ConcreteHandler1
request2 is handle by ConcreteHandler2
```



## æ¨¡å¼æ€»ç»“

èŒè´£é“¾æ¨¡å¼é€šè¿‡å»ºç«‹ä¸€æ¡é“¾æ¥ç»„ç»‡è¯·æ±‚çš„å¤„ç†è€…ï¼Œè¯·æ±‚å°†æ²¿ç€é“¾è¿›è¡Œä¼ é€’ï¼Œè¯·æ±‚å‘é€è€…æ— é¡»çŸ¥é“è¯·æ±‚åœ¨ä½•æ—¶ã€ä½•å¤„ä»¥åŠå¦‚ä½•è¢«å¤„ç†ï¼Œå®ç°äº†è¯·æ±‚å‘é€è€…ä¸å¤„ç†è€…çš„è§£è€¦ã€‚

åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œå¦‚æœé‡åˆ°æœ‰å¤šä¸ªå¯¹è±¡å¯ä»¥å¤„ç†åŒä¸€è¯·æ±‚æ—¶å¯ä»¥åº”ç”¨èŒè´£é“¾æ¨¡å¼ï¼Œä¾‹å¦‚åœ¨Webåº”ç”¨å¼€å‘ä¸­åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨(`Filter`)é“¾æ¥å¯¹è¯·æ±‚æ•°æ®è¿›è¡Œè¿‡æ»¤ï¼Œåœ¨å·¥ä½œæµç³»ç»Ÿä¸­å®ç°å…¬æ–‡çš„åˆ†çº§å®¡æ‰¹ç­‰ç­‰ï¼Œä½¿ç”¨èŒè´£é“¾æ¨¡å¼å¯ä»¥è¾ƒå¥½åœ°è§£å†³æ­¤ç±»é—®é¢˜ã€‚

### é€‚ç”¨åœºæ™¯

- æœ‰å¤šä¸ªå¯¹è±¡å¯ä»¥å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œå…·ä½“å“ªä¸ªå¯¹è±¡å¤„ç†è¯¥è¯·æ±‚å¾…è¿è¡Œæ—¶åˆ»å†ç¡®å®šï¼Œå®¢æˆ·ç«¯åªéœ€å°†è¯·æ±‚æäº¤åˆ°é“¾ä¸Šï¼Œè€Œæ— é¡»å…³å¿ƒè¯·æ±‚çš„å¤„ç†å¯¹è±¡æ˜¯è°ä»¥åŠå®ƒæ˜¯å¦‚ä½•å¤„ç†çš„ã€‚
- åœ¨ä¸æ˜ç¡®æŒ‡å®šæ¥æ”¶è€…çš„æƒ…å†µä¸‹ï¼Œå‘å¤šä¸ªå¯¹è±¡ä¸­çš„ä¸€ä¸ªæäº¤ä¸€ä¸ªè¯·æ±‚ã€‚
- å¯åŠ¨æ€æŒ‡å®šä¸€ç»„å¯¹è±¡å¤„ç†è¯·æ±‚ï¼Œå®¢æˆ·ç«¯å¯ä»¥åŠ¨æ€åˆ›å»ºèŒè´£é“¾æ¥å¤„ç†è¯·æ±‚ï¼Œè¿˜å¯ä»¥æ”¹å˜é“¾ä¸­å¤„ç†è€…ä¹‹é—´çš„å…ˆåæ¬¡åºã€‚

# å‚è€ƒæ–‡ç« 

- [åˆ˜ä¼Ÿã€Šè®¾è®¡æ¨¡å¼çš„è‰ºæœ¯ä¹‹é“(è½¯ä»¶å¼€å‘äººå‘˜å†…åŠŸä¿®ç‚¼ä¹‹é“)ã€‹](https://blog.csdn.net/LoveLion/article/details/17517213)
- [èŒè´£é“¾æ¨¡å¼(Chain of Responsibility Pattern)â€”â€”è¯·æ±‚çš„é“¾å¼å¤„ç†](https://bytesfly.github.io/blog/#/DesignPattern/chain-of-responsibility-pattern?id=èŒè´£é“¾æ¨¡å¼chain-of-responsibility-patternè¯·æ±‚çš„é“¾å¼å¤„ç†)
- [Java å…¨æ ˆçŸ¥è¯†ä½“ç³»](https://www.pdai.tech/md/dev-spec/pattern/15_chain.html)

